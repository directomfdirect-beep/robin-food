# Robin Food â€” Navigation v1.4.5 (Consolidated)

| Ğ’ĞµÑ€ÑĞ¸Ñ | Ğ”Ğ°Ñ‚Ğ° | Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ | ĞĞ²Ñ‚Ğ¾Ñ€ |
|--------|------|--------|-------|
| 1.4.5 | 16.02.2026 | Consolidated | Robin Food Product Team |

**Scope v1.4.5:** ĞŸĞ¾Ğ»Ğ½Ğ°Ñ Ğ½Ğ°Ğ²Ğ¸Ğ³Ğ°Ñ†Ğ¸Ğ¾Ğ½Ğ½Ğ°Ñ ĞºĞ°Ñ€Ñ‚Ğ° Buyer App (24 ÑĞºÑ€Ğ°Ğ½Ğ°) Ğ¸ Picker App (5 ÑĞºÑ€Ğ°Ğ½Ğ¾Ğ²) Ñ ÑƒÑ‡Ñ‘Ñ‚Ğ¾Ğ¼ 8 Ğ½Ğ¾Ğ²Ñ‹Ñ… Ñ„Ğ¸Ñ‡ Ğ¸Ğ· Snapshot v1.0 + Order History & Rating alignment + ÑÑ‚Ğ°Ñ‚ÑƒÑÑ‹ ready/customer_arrived + flow Ğ²Ñ‹Ğ´Ğ°Ñ‡Ğ¸ Ğ·Ğ°ĞºĞ°Ğ·Ğ° + SBPPaymentSheet (QR-flow Ğ¡Ğ‘ĞŸ). **ĞŸĞ°Ñ‚Ñ‡ v1.4.4:** Localization formats reference (Spec v1.4.4 sec 14), Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğµ cross-references. **ĞŸĞ°Ñ‚Ñ‡ v1.4.5:** Version Matrix Ğ²Ñ‹Ñ€Ğ¾Ğ²Ğ½ĞµĞ½Ğ° Ğ´Ğ¾ IC v1.6.4, ĞºÑ€Ğ¾ÑÑ-ÑÑÑ‹Ğ»ĞºĞ¸ Ğ½Ğ° Spec/API/DM/Settlement Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ĞµĞ½Ñ‹.

**Ğ—Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ğ¾ÑÑ‚Ğ¸:** Spec v1.4.4, API Contract v1.4.4, Data Model v1.4.10, Integration Contracts v1.6.4, BNPL Integration v1.2.2, Settlement v1.2.2

**Ğ˜ÑÑ‚Ğ¾Ñ‡Ğ½Ğ¸Ğº Ğ¸Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ğ¹:** Snapshot Ñ€ĞµÑˆĞµĞ½Ğ¸Ğ¹ v1.0 (15.02.2026), Patch Snapshot v1.1 (15.02.2026), Patch Snapshot v1.2 (15.02.2026), Patch Snapshot v1.3 (16.02.2026), Snapshot Ñ€ĞµÑˆĞµĞ½Ğ¸Ğ¹ (16.02.2026)

---

## Changelog v1.4.4 â†’ v1.4.5

| # | Ğ˜Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ğµ | Snapshot Ñ€ĞµÑˆĞµĞ½Ğ¸Ğ¹ 16.02.2026 | Ğ¢Ğ¸Ğ¿ |
|---|-----------|---------------------------|-----|
| 1 | Sec 10: Version Matrix â€” Integration Contracts v1.6.3 â†’ **v1.6.4** (min v1.6.3). Ğ’ÑĞµ Ğ¾ÑÑ‚Ğ°Ğ»ÑŒĞ½Ñ‹Ğµ Ğ·Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ğ¾ÑÑ‚Ğ¸ Ğ¿Ğ¾Ğ´Ñ‚Ğ²ĞµÑ€Ğ¶Ğ´ĞµĞ½Ñ‹ Ğ°ĞºÑ‚ÑƒĞ°Ğ»ÑŒĞ½Ñ‹Ğ¼Ğ¸ | Â§1.4 Version Matrix | METADATA |
| 2 | ĞšÑ€Ğ¾ÑÑ-ÑÑÑ‹Ğ»ĞºĞ¸ Ğ½Ğ° Spec v1.4.4, API Contract v1.4.4, Data Model v1.4.10, Settlement v1.2.2 â€” Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ĞµĞ½Ñ‹, Ğ±ĞµĞ· Ñ€Ğ°ÑÑ…Ğ¾Ğ¶Ğ´ĞµĞ½Ğ¸Ğ¹ | Â§1.4 Cross-ref audit | VERIFIED |

---

## Changelog v1.4.3 â†’ v1.4.4

| # | Ğ˜Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ğµ | Patch Bundle Fix | Ğ¢Ğ¸Ğ¿ |
|---|-----------|-----------------|-----|
| 1 | Sec 3.4, 3.5: Price/date/weight display â€” ÑÑÑ‹Ğ»ĞºĞ° Ğ½Ğ° Spec v1.4.4 sec 14.3 (Localization formats) | Fix #9 | ADD REF |
| 2 | Sec 6: A11y â€” accessibilityLabel Ğ´Ğ»Ñ ÑÑƒĞ¼Ğ¼ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµÑ‚ Ğ»Ğ¾ĞºĞ°Ğ»Ğ¸Ğ·Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğ¹ Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ‚ (`{amount} Ñ€ÑƒĞ±Ğ»ĞµĞ¹`, Spec v1.4.4 sec 14) | Fix #9 | ALTER A11Y |
| 3 | All cross-refs: Spec v1.4.3 â†’ v1.4.4, API Contract v1.4.3 â†’ v1.4.4, DM v1.4.9 â†’ v1.4.10, Settlement v1.2.1 â†’ v1.2.2 | meta | ALTER REF |
| 4 | Sec 10: Version Matrix Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ° | meta | METADATA |

---

## Changelog v1.4.2 â†’ v1.4.3

| # | Ğ˜Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ğµ | ĞŸĞ°Ñ‚Ñ‡ Snapshot v1.2 | Ğ¢Ğ¸Ğ¿ |
|---|-----------|-------------------|-----|
| 1 | Sec 1.1: NEW screen `SBPPaymentSheet` (#24) â€” bottom sheet Ñ QR-ĞºĞ¾Ğ´Ğ¾Ğ¼ Ğ´Ğ»Ñ Ğ¾Ğ¿Ğ»Ğ°Ñ‚Ñ‹ Ñ‡ĞµÑ€ĞµĞ· Ğ¡Ğ‘ĞŸ | ĞŸĞ°Ñ‚Ñ‡ #5 | NEW SCREEN |
| 2 | Sec 3.4: Provider â†’ Screen mapping table (tinkoff â†’ PaymentWebView, sbp â†’ SBPPaymentSheet, BNPL â†’ PaymentWebView) | ĞŸĞ°Ñ‚Ñ‡ #5 | NEW TABLE |
| 3 | Sec 3.4: Checkout flow Ğ²ĞµÑ‚Ğ²Ğ»ĞµĞ½Ğ¸Ğµ â€” `if sbp â†’ SBPPaymentSheet`, `else â†’ PaymentWebView` | ĞŸĞ°Ñ‚Ñ‡ #5 | ALTER FLOW |
| 4 | Sec 3.4: SBPPaymentSheet â€” Ğ¿Ğ¾Ğ»Ğ½Ğ¾Ğµ Ğ¾Ğ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ UX (QR, deep link, timer, WS states) | ĞŸĞ°Ñ‚Ñ‡ #5 | NEW FLOW |
| 5 | Sec 6: A11y â€” SBPPaymentSheet: QR aria-label, ĞºĞ½Ğ¾Ğ¿ĞºĞ° Â«ĞÑ‚ĞºÑ€Ñ‹Ñ‚ÑŒ Ğ±Ğ°Ğ½ĞºÂ» â€” primary focus | ĞŸĞ°Ñ‚Ñ‡ #5 | ALTER A11Y |
| 6 | Sec 10: Version Matrix Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ° (Spec v1.4.3, AC v1.4.3, DM v1.4.9, IC v1.6.3, Nav v1.4.3) | ĞŸĞ°Ñ‚Ñ‡ v1.2 meta | METADATA |

---

## Changelog v1.4.1 â†’ v1.4.2

| # | Ğ˜Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ğµ | ĞŸĞ°Ñ‚Ñ‡ Snapshot v1.1 | Ğ¢Ğ¸Ğ¿ |
|---|-----------|-------------------|-----|
| 1 | Sec 3.1: AuthOTPScreen â€” Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½Ğ° Ğ¾ÑˆĞ¸Ğ±ĞºĞ° `CONSENT_REQUIRED` (400) Ğ´Ğ»Ñ Ğ½Ğ¾Ğ²Ñ‹Ñ… Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ĞµĞ¹ | ĞŸĞ°Ñ‚Ñ‡ #1 | ADD ERROR HANDLING |
| 2 | Sec 3.5: OrderTrackingScreen â€” progress bar Ñ€Ğ°ÑÑˆĞ¸Ñ€ĞµĞ½: +`ready`, `customer_arrived`. ĞšĞ½Ğ¾Ğ¿ĞºĞ° Â«Ğ¯ Ğ½Ğ° Ğ¼ĞµÑÑ‚ĞµÂ» Ğ¿Ñ€Ğ¸ `status=ready` | ĞŸĞ°Ñ‚Ñ‡ #3 | ALTER FLOW |
| 3 | Sec 3.5: OrderTrackingScreen â€” Chat tab Ğ´Ğ¾ÑÑ‚ÑƒĞ¿ĞµĞ½ Ğ´Ğ»Ñ Ğ·Ğ°Ğ¿Ğ¸ÑĞ¸ Ğ² `ready`, `customer_arrived` | ĞŸĞ°Ñ‚Ñ‡ #3 | ALTER LIFECYCLE |
| 4 | Sec 3.5: OrderHistoryScreen â€” Ñ„Ğ¸Ğ»ÑŒÑ‚Ñ€ Â«ĞĞºÑ‚Ğ¸Ğ²Ğ½Ñ‹ĞµÂ» Ğ²ĞºĞ»ÑÑ‡Ğ°ĞµÑ‚ `ready`, `customer_arrived` | ĞŸĞ°Ñ‚Ñ‡ #3 | ALTER FILTER |
| 5 | Sec 3.4: PaymentMethodScreen â€” Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½ Ğ¡Ğ‘ĞŸ (`sbp`) | ĞŸĞ°Ñ‚Ñ‡ #5 | ALTER ENUM |
| 6 | Sec 3.8: Picker Flow â€” `complete` â†’ status `ready` (Ğ±Ñ‹Ğ»Ğ¾ `completed`); Ğ½Ğ¾Ğ²Ñ‹Ğ¹ action `confirm-pickup` | ĞŸĞ°Ñ‚Ñ‡ #3 | ALTER FLOW |
| 7 | Sec 3.8: Picker Chat â€” Ğ´Ğ¾ÑÑ‚ÑƒĞ¿ĞµĞ½ Ğ´Ğ»Ñ Ğ·Ğ°Ğ¿Ğ¸ÑĞ¸ Ğ² `ready`, `customer_arrived` | ĞŸĞ°Ñ‚Ñ‡ #3 | ALTER LIFECYCLE |
| 8 | Sec 4: Deep link `robinfood://order/{orderId}?action=arrived` | ĞŸĞ°Ñ‚Ñ‡ #3 | NEW DEEP LINK |
| 9 | Sec 9: Push routing â€” Ğ½Ğ¾Ğ²Ñ‹Ğµ push types: `order.ready`, `customer_arrived`, `order.completed` | ĞŸĞ°Ñ‚Ñ‡ #3 | ALTER ROUTING |
| 10 | Sec 10: Version Matrix Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ° | ĞŸĞ°Ñ‚Ñ‡ v1.1 meta | METADATA |

---

## Changelog v1.4.0 â†’ v1.4.1

| # | Ğ˜Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ğµ | ĞŸĞ°Ñ‚Ñ‡ Snapshot | Ğ¢Ğ¸Ğ¿ |
|---|-----------|--------------|-----|
| 1 | Sec 3.1: `Error: INVALID_CODE` â†’ `Error: INVALID_OTP` | ĞŸĞ°Ñ‚Ñ‡ #2 | FIX ERROR CODE |
| 2 | Sec 3.1: Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½Ğ° Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ° `Error: OTP_EXPIRED` (410) â†’ Â«OTP Ğ¸ÑÑ‚Ñ‘Ğº. Ğ—Ğ°Ğ¿Ñ€Ğ¾ÑĞ¸Ñ‚ÑŒ Ğ·Ğ°Ğ½Ğ¾Ğ²Ğ¾?Â» | ĞŸĞ°Ñ‚Ñ‡ #3 | ADD ERROR HANDLING |
| 3 | Sec 3.5: Rating flow Ğ²Ñ‹Ñ€Ğ¾Ğ²Ğ½ĞµĞ½ Ñ API â€” ĞµĞ´Ğ¸Ğ½Ğ°Ñ ÑˆĞºĞ°Ğ»Ğ° 1â€“5 + ĞºĞ¾Ğ¼Ğ¼ĞµĞ½Ñ‚Ğ°Ñ€Ğ¸Ğ¹ (Ğ±Ñ‹Ğ»Ğ¾ multi-criteria) | ĞŸĞ°Ñ‚Ñ‡ #1 | FIX RATING FLOW |
| 4 | Sec 3.5: OrderHistoryScreen Ğ¿Ñ€Ğ¸Ğ²ÑĞ·Ğ°Ğ½ Ğº `GET /api/v1/orders` (sec 10.8 API Contract) | ĞŸĞ°Ñ‚Ñ‡ #1 | ADD API REF |
| 5 | Sec 4: Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½ deep link `robinfood://orders` â†’ OrderHistoryScreen | ĞŸĞ°Ñ‚Ñ‡ #1 | NEW DEEP LINK |
| 6 | Sec 10: Version Matrix â†’ Integration Contracts v1.6.1, BNPL v1.2.1, Settlement v1.2.1 | ĞŸĞ°Ñ‚Ñ‡ #8 | METADATA |

---

## Changelog v1.3.1 â†’ v1.4.0

| # | Ğ˜Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ğµ | Ğ¢Ğ¸Ğ¿ | Snapshot Â§ |
|---|-----------|-----|-----------|
| 1 | +AuthPhoneScreen, +AuthOTPScreen â€” OTP flow | NEW SCREEN | Â§2 |
| 2 | +ProductDetailScreen â€” ĞšĞ‘Ğ–Ğ£, Ğ¾Ğ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ, multi-photo, â˜… | NEW SCREEN | Â§3 |
| 3 | +SearchScreen, +SearchResultsScreen â€” unified search | NEW SCREEN | Â§4 |
| 4 | +AddressEditScreen â€” ÑĞ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ/Ñ€ĞµĞ´Ğ°ĞºÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ°Ğ´Ñ€ĞµÑĞ° | NEW SCREEN | Â§8 |
| 5 | +SmartAlertsScreen, +AlertDetailScreen â€” ÑƒĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ğ°Ğ»ĞµÑ€Ñ‚Ğ°Ğ¼Ğ¸ | NEW SCREEN | Â§9 |
| 6 | FavoritesScreen â€” scope Ñ€Ğ°ÑÑˆĞ¸Ñ€ĞµĞ½ (product + store) | UPDATED | Â§7 |
| 7 | ProfileScreen â€” scope Ñ€Ğ°ÑÑˆĞ¸Ñ€ĞµĞ½ (delete account) | UPDATED | Â§6 |
| 8 | AddressScreen â€” scope Ñ€Ğ°ÑÑˆĞ¸Ñ€ĞµĞ½ (CRUD, default) | UPDATED | Â§8 |
| 9 | OrderTrackingScreen â€” Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½ ChatView tab | UPDATED | Â§10 |
| 10 | SettingsScreen â€” Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½ DeleteAccountFlow | UPDATED | Â§6 |
| 11 | PickerOrderDetailScreen â€” Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½ ChatView tab | UPDATED | Â§10 |
| 12 | +Deep link: `robinfood://product/{productId}` | NEW DEEP LINK | Â§3 |
| 13 | +Deep link: `robinfood://order/{orderId}?tab=chat` | NEW DEEP LINK | Â§10 |
| 14 | Tab bar: +Search tab, Favorites Ğ¿ĞµÑ€ĞµĞ¸Ğ¼ĞµĞ½Ğ¾Ğ²Ğ°Ğ½Ğ¾ | UPDATED | Â§4, Â§7 |

---

## 1. Screen Registry

### 1.1 Buyer App â€” 24 ÑĞºÑ€Ğ°Ğ½Ğ° (UPDATED v1.4.3: +1)

| # | Screen ID | ĞĞ°Ğ·Ğ²Ğ°Ğ½Ğ¸Ğµ | Ğ’ĞµÑ€ÑĞ¸Ñ | ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ |
|---|-----------|----------|--------|----------|
| 1 | `AuthPhoneScreen` | Ğ’Ğ²Ğ¾Ğ´ Ñ‚ĞµĞ»ĞµÑ„Ğ¾Ğ½Ğ° | NEW v1.4.0 | Ğ’Ğ²Ğ¾Ğ´ Ğ½Ğ¾Ğ¼ĞµÑ€Ğ° + ÑĞ¾Ğ³Ğ»Ğ°ÑĞ¸Ğµ ĞŸĞ” (152-Ğ¤Ğ—) |
| 2 | `AuthOTPScreen` | Ğ’Ğ²Ğ¾Ğ´ OTP | NEW v1.4.0, **UPD v1.4.2** | 6-Ğ·Ğ½Ğ°Ñ‡Ğ½Ñ‹Ğ¹ ĞºĞ¾Ğ´, 2 Ğ¼Ğ¸Ğ½ TTL, 3 Ğ¿Ğ¾Ğ¿Ñ‹Ñ‚ĞºĞ¸, resend. ĞÑˆĞ¸Ğ±ĞºĞ¸: `INVALID_OTP`, `OTP_BLOCKED`, `OTP_EXPIRED` (410), `CONSENT_REQUIRED` (400) |
| 3 | `HomeScreen` | Ğ“Ğ»Ğ°Ğ²Ğ½Ñ‹Ğ¹ ÑĞºÑ€Ğ°Ğ½ | v1.3.1 | ĞšĞ°Ñ€Ñ‚Ğ° Ğ¼Ğ°Ğ³Ğ°Ğ·Ğ¸Ğ½Ğ¾Ğ² / ÑĞ¿Ğ¸ÑĞ¾Ğº, Ğ°Ğ´Ñ€ĞµÑ, Ñ€Ğ°Ğ´Ğ¸ÑƒÑ |
| 4 | `StoreScreen` | ĞœĞ°Ğ³Ğ°Ğ·Ğ¸Ğ½ | v1.3.1 | Ğ”ĞµÑ‚Ğ°Ğ»Ğ¸ Ğ¼Ğ°Ğ³Ğ°Ğ·Ğ¸Ğ½Ğ°, ĞºĞ°Ñ‚ĞµĞ³Ğ¾Ñ€Ğ¸Ğ¸, â˜… Ğ¸Ğ·Ğ±Ñ€Ğ°Ğ½Ğ½Ğ¾Ğµ |
| 5 | `ProductListScreen` | Ğ¢Ğ¾Ğ²Ğ°Ñ€Ñ‹ Ğ¼Ğ°Ğ³Ğ°Ğ·Ğ¸Ğ½Ğ° | v1.3.1 | Ğ¡Ğ¿Ğ¸ÑĞ¾Ğº Ñ‚Ğ¾Ğ²Ğ°Ñ€Ğ¾Ğ², Ñ„Ğ¸Ğ»ÑŒÑ‚Ñ€Ñ‹, ÑĞ¾Ñ€Ñ‚Ğ¸Ñ€Ğ¾Ğ²ĞºĞ°, â˜… |
| 6 | `ProductDetailScreen` | ĞšĞ°Ñ€Ñ‚Ğ¾Ñ‡ĞºĞ° Ñ‚Ğ¾Ğ²Ğ°Ñ€Ğ° | NEW v1.4.0 | Ğ¤Ğ¾Ñ‚Ğ¾ (swipe), ĞšĞ‘Ğ–Ğ£, Ğ±Ñ€ĞµĞ½Ğ´, Ğ¾Ğ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ, â˜…, ĞºĞ¾Ñ€Ğ·Ğ¸Ğ½Ğ° |
| 7 | `SearchScreen` | ĞŸĞ¾Ğ¸ÑĞº | NEW v1.4.0 | ĞŸĞ¾Ğ¸ÑĞºĞ¾Ğ²Ğ°Ñ ÑÑ‚Ñ€Ğ¾ĞºĞ°, suggest (7, debounce 300ms) |
| 8 | `SearchResultsScreen` | Ğ ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ñ‹ Ğ¿Ğ¾Ğ¸ÑĞºĞ° | NEW v1.4.0 | Ğ¡ĞµĞºÑ†Ğ¸Ğ¸: Products, Stores, Categories, â˜… inline |
| 9 | `CartScreen` | ĞšĞ¾Ñ€Ğ·Ğ¸Ğ½Ğ° | v1.3.1 â†’ UPD | Server-side, Ğ³Ñ€ÑƒĞ¿Ğ¿Ğ¸Ñ€Ğ¾Ğ²ĞºĞ° Ğ¿Ğ¾ Ğ¼Ğ°Ğ³Ğ°Ğ·Ğ¸Ğ½Ğ°Ğ¼, warnings |
| 10 | `PaymentMethodScreen` | Ğ’Ñ‹Ğ±Ğ¾Ñ€ Ğ¾Ğ¿Ğ»Ğ°Ñ‚Ñ‹ | v1.3.1, **UPD v1.4.2** | Tinkoff / Ğ¡Ğ‘ĞŸ / BNPL *(v1.4.2: +Ğ¡Ğ‘ĞŸ)* |
| 11 | `OrderConfirmationScreen` | ĞŸĞ¾Ğ´Ñ‚Ğ²ĞµÑ€Ğ¶Ğ´ĞµĞ½Ğ¸Ğµ | v1.3.1 â†’ UPD | N Ğ¿Ğ¾Ğ´Ğ·Ğ°ĞºĞ°Ğ·Ğ¾Ğ², multistore summary |
| 12 | `PaymentWebView` | ĞĞ¿Ğ»Ğ°Ñ‚Ğ° (WebView) | v1.3.1 | Tinkoff / BNPL redirect |
| 13 | `SBPPaymentSheet` | ĞĞ¿Ğ»Ğ°Ñ‚Ğ° Ğ¡Ğ‘ĞŸ | **NEW v1.4.3** | Bottom sheet: QR-ĞºĞ¾Ğ´ + deep link Ğ² Ğ±Ğ°Ğ½ĞºĞ¾Ğ²ÑĞºĞ¾Ğµ Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğµ + Ñ‚Ğ°Ğ¹Ğ¼ĞµÑ€ 15 Ğ¼Ğ¸Ğ½ |
| 14 | `OrderTrackingScreen` | Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ Ğ·Ğ°ĞºĞ°Ğ·Ğ° | v1.3.1 â†’ **UPD v1.4.2** | Tabs: Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ / Ğ¡Ğ¾ÑÑ‚Ğ°Ğ² / Ğ§Ğ°Ñ‚. Progress: pendingâ†’confirmedâ†’pickingâ†’readyâ†’customer_arrivedâ†’completed. Â«Ğ¯ Ğ½Ğ° Ğ¼ĞµÑÑ‚ĞµÂ» Ğ¿Ñ€Ğ¸ ready |
| 15 | `OrderDetailScreen` | Ğ”ĞµÑ‚Ğ°Ğ»Ğ¸ Ğ·Ğ°ĞºĞ°Ğ·Ğ° | v1.3.1, **UPD v1.4.1** | Ğ¡Ğ¾ÑÑ‚Ğ°Ğ², ÑÑƒĞ¼Ğ¼Ñ‹, `originalTotalAmount` strikethrough, Ğ¾Ñ‚Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ğµ Ñ€ĞµĞ¹Ñ‚Ğ¸Ğ½Ğ³Ğ° |
| 16 | `OrderHistoryScreen` | Ğ˜ÑÑ‚Ğ¾Ñ€Ğ¸Ñ Ğ·Ğ°ĞºĞ°Ğ·Ğ¾Ğ² | v1.3.1, **UPD v1.4.2** | Tabs: ĞĞºÑ‚Ğ¸Ğ²Ğ½Ñ‹Ğµ (Ğ²ĞºĞ». ready, customer_arrived) / Ğ—Ğ°Ğ²ĞµÑ€ÑˆÑ‘Ğ½Ğ½Ñ‹Ğµ / ĞÑ‚Ğ¼ĞµĞ½Ñ‘Ğ½Ğ½Ñ‹Ğµ. API: `GET /orders` |
| 17 | `FavoritesScreen` | Ğ˜Ğ·Ğ±Ñ€Ğ°Ğ½Ğ½Ğ¾Ğµ | v1.3.1 â†’ UPD | Ğ¤Ğ¸Ğ»ÑŒÑ‚Ñ€: Ğ’ÑĞµ / Ğ¢Ğ¾Ğ²Ğ°Ñ€Ñ‹ / ĞœĞ°Ğ³Ğ°Ğ·Ğ¸Ğ½Ñ‹; batch delete |
| 18 | `ProfileScreen` | ĞŸÑ€Ğ¾Ñ„Ğ¸Ğ»ÑŒ | v1.3.1 â†’ UPD | fullName, Ñ‚ĞµĞ»ĞµÑ„Ğ¾Ğ½, ÑÑ‚Ğ°Ñ‚ÑƒÑ ÑƒĞ´Ğ°Ğ»ĞµĞ½Ğ¸Ñ |
| 19 | `PaymentMethodsScreen` | Ğ¡Ğ¿Ğ¾ÑĞ¾Ğ±Ñ‹ Ğ¾Ğ¿Ğ»Ğ°Ñ‚Ñ‹ | v1.3.1 | CRUD ĞºĞ°Ñ€Ñ‚ |
| 20 | `AddressScreen` | ĞĞ´Ñ€ĞµÑĞ° | v1.3.1 â†’ UPD | Ğ¡Ğ¿Ğ¸ÑĞ¾Ğº (max 5), default badge, CRUD |
| 21 | `AddressEditScreen` | Ğ ĞµĞ´. Ğ°Ğ´Ñ€ĞµÑĞ° | NEW v1.4.0 | Yandex Geocoding suggest, label, is_default |
| 22 | `SettingsScreen` | ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸ | v1.3.1 â†’ **UPD v1.4.2** | Ğ£Ğ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ñ, Ñ‚ĞµĞ¼Ğ°, Delete Account flow (active orders Ğ²ĞºĞ». ready/customer_arrived) |
| 23 | `SmartAlertsScreen` | Smart Alerts | NEW v1.4.0 | Ğ¡Ğ¿Ğ¸ÑĞ¾Ğº Ğ°Ğ»ĞµÑ€Ñ‚Ğ¾Ğ² (max 20), Ğ¸ÑÑ‚Ğ¾Ñ€Ğ¸Ñ ÑÑ€Ğ°Ğ±Ğ°Ñ‚Ñ‹Ğ²Ğ°Ğ½Ğ¸Ğ¹ |
| 24 | `AlertDetailScreen` | ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ° Ğ°Ğ»ĞµÑ€Ñ‚Ğ° | NEW v1.4.0 | Ğ¢Ñ€Ğ¸Ğ³Ğ³ĞµÑ€, Ñ€Ğ°ÑĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ, Ğ¿Ğ¾Ñ€Ğ¾Ğ³, Ğ²ĞºĞ»/Ğ²Ñ‹ĞºĞ» |

### 1.2 Picker App â€” 5 ÑĞºÑ€Ğ°Ğ½Ğ¾Ğ²

| # | Screen ID | ĞĞ°Ğ·Ğ²Ğ°Ğ½Ğ¸Ğµ | Ğ’ĞµÑ€ÑĞ¸Ñ | ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ |
|---|-----------|----------|--------|----------|
| 1 | `PickerOrderListScreen` | Ğ¡Ğ¿Ğ¸ÑĞ¾Ğº Ğ·Ğ°ĞºĞ°Ğ·Ğ¾Ğ² | v1.3.1, **UPD v1.4.2** | Tabs: ĞĞ¾Ğ²Ñ‹Ğµ / Ğ’ ÑĞ±Ğ¾Ñ€ĞºĞµ / Ğ“Ğ¾Ñ‚Ğ¾Ğ²Ñ‹Ğµ / Ğ’Ñ‹Ğ´Ğ°Ñ‡Ğ° / Ğ—Ğ°Ğ²ĞµÑ€ÑˆÑ‘Ğ½Ğ½Ñ‹Ğµ *(v1.4.2: Â«Ğ“Ğ¾Ñ‚Ğ¾Ğ²Ñ‹ĞµÂ» = ready, Â«Ğ’Ñ‹Ğ´Ğ°Ñ‡Ğ°Â» = customer_arrived)* |
| 2 | `PickerOrderDetailScreen` | Ğ”ĞµÑ‚Ğ°Ğ»Ğ¸ Ğ·Ğ°ĞºĞ°Ğ·Ğ° | v1.3.1 â†’ **UPD v1.4.2** | Ğ¢Ğ¾Ğ²Ğ°Ñ€Ñ‹, weigh, replace, ChatView tab, confirm-pickup |
| 3 | `PickerScanScreen` | Ğ¡ĞºĞ°Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ QR | v1.3.1 | ĞšĞ°Ğ¼ĞµÑ€Ğ°, Ğ²Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸Ñ, fallback Ñ€ÑƒÑ‡Ğ½Ğ¾Ğ¹ Ğ²Ğ²Ğ¾Ğ´ |
| 4 | `PickerHistoryScreen` | Ğ˜ÑÑ‚Ğ¾Ñ€Ğ¸Ñ | v1.3.1 | Ğ’Ñ‹Ğ¿Ğ¾Ğ»Ğ½ĞµĞ½Ğ½Ñ‹Ğµ Ğ·Ğ°ĞºĞ°Ğ·Ñ‹, KPI |
| 5 | `PickerProfileScreen` | ĞŸÑ€Ğ¾Ñ„Ğ¸Ğ»ÑŒ Ğ¿Ğ¸ĞºĞµÑ€Ğ° | v1.3.1 | Ğ”Ğ°Ğ½Ğ½Ñ‹Ğµ, Ğ¼Ğ°Ğ³Ğ°Ğ·Ğ¸Ğ½, delete account |

---

## 2. Tab Bar

### 2.1 Buyer App â€” Bottom Navigation (5 tabs)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ  Home â”‚ ğŸ” Searchâ”‚ ğŸ›’ Cart  â”‚  â˜… Favs  â”‚ ğŸ‘¤ Profileâ”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

| Tab | Screen | Badge |
|-----|--------|-------|
| Home | `HomeScreen` | â€” |
| Search | `SearchScreen` **(NEW)** | â€” |
| Cart | `CartScreen` | Items count (red dot) |
| Favorites | `FavoritesScreen` | â€” |
| Profile | `ProfileScreen` | Red dot if deletion pending |

**Ğ˜Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ñ v1.4.0:**
- **Search tab** Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½ (Ğ±Ñ‹Ğ» Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ inline Ğ² HomeScreen) [Snapshot Â§4]
- **Favorites** Ğ¿ĞµÑ€ĞµĞ¸Ğ¼ĞµĞ½Ğ¾Ğ²Ğ°Ğ½Ğ¾ Ğ¸Ğ· Â«Ğ˜Ğ·Ğ±Ñ€Ğ°Ğ½Ğ½Ğ¾Ğµ Ñ‚Ğ¾Ğ²Ğ°Ñ€Ñ‹Â» â†’ Â«Ğ˜Ğ·Ğ±Ñ€Ğ°Ğ½Ğ½Ğ¾ĞµÂ» (product + store)
- **Profile** badge Ğ¿Ñ€Ğ¸ pending deletion request

### 2.2 Picker App â€” Bottom Navigation (3 tabs)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“‹ Orders   â”‚  ğŸ“Š History  â”‚  ğŸ‘¤ Profile  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

| Tab | Screen | Badge |
|-----|--------|-------|
| Orders | `PickerOrderListScreen` | New orders count |
| History | `PickerHistoryScreen` | â€” |
| Profile | `PickerProfileScreen` | â€” |

---

## 3. Navigation Flows

### 3.1 Auth Flow (NEW v1.4.0, UPDATED v1.4.2 â€” ĞŸĞ°Ñ‚Ñ‡ #1)

```
App Launch
â”œâ”€â”€ IF has valid accessToken â†’ HomeScreen
â”œâ”€â”€ IF has valid refreshToken â†’ silent refresh â†’ HomeScreen
â””â”€â”€ ELSE â†’ AuthPhoneScreen
    â”‚
    AuthPhoneScreen
    â”œâ”€â”€ Input: phone (+7 mask)
    â”œâ”€â”€ Checkbox: ÑĞ¾Ğ³Ğ»Ğ°ÑĞ¸Ğµ Ğ½Ğ° Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºÑƒ ĞŸĞ” âœ“ (required, 152-Ğ¤Ğ—)
    â”œâ”€â”€ Action: Â«ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ ĞºĞ¾Ğ´Â» â†’ POST /auth/send-otp
    â”œâ”€â”€ Error: RATE_LIMITED â†’ Â«ĞŸĞ¾Ğ´Ğ¾Ğ¶Ğ´Ğ¸Ñ‚Ğµ {retryAfter} ÑĞµĞºÂ»
    â””â”€â”€ Success â†’ AuthOTPScreen
        â”‚
        AuthOTPScreen
        â”œâ”€â”€ Input: 6-digit code (auto-submit on 6th digit)
        â”œâ”€â”€ Timer: 2 Ğ¼Ğ¸Ğ½ countdown â†’ resend enabled
        â”œâ”€â”€ Action: POST /auth/verify-otp
        â”œâ”€â”€ Error: INVALID_OTP â†’ Â«ĞĞµĞ²ĞµÑ€Ğ½Ñ‹Ğ¹ ĞºĞ¾Ğ´Â» (attempts 3â†’blocked)  â† v1.4.1: Ğ±Ñ‹Ğ»Ğ¾ INVALID_CODE
        â”œâ”€â”€ Error: OTP_BLOCKED â†’ Â«ĞšĞ¾Ğ´ Ğ·Ğ°Ğ±Ğ»Ğ¾ĞºĞ¸Ñ€Ğ¾Ğ²Ğ°Ğ½. Ğ—Ğ°Ğ¿Ñ€Ğ¾ÑĞ¸Ñ‚Ğµ Ğ½Ğ¾Ğ²Ñ‹Ğ¹Â»
        â”œâ”€â”€ Error: OTP_EXPIRED (410) â†’ Â«OTP Ğ¸ÑÑ‚Ñ‘Ğº. Ğ—Ğ°Ğ¿Ñ€Ğ¾ÑĞ¸Ñ‚ÑŒ Ğ·Ğ°Ğ½Ğ¾Ğ²Ğ¾?Â»  â† v1.4.1: Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½Ğ¾
        â”‚   â””â”€â”€ Action: Â«Ğ”Ğ°Â» â†’ POST /auth/send-otp (resend)
        â”œâ”€â”€ Error: CONSENT_REQUIRED (400) â†’ Â«ĞĞµĞ¾Ğ±Ñ…Ğ¾Ğ´Ğ¸Ğ¼Ğ¾ ÑĞ¾Ğ³Ğ»Ğ°ÑĞ¸Ğµ Ğ½Ğ° Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºÑƒ ĞŸĞ”Â»  â† NEW v1.4.2 ĞŸĞ°Ñ‚Ñ‡ #1
        â”‚   â””â”€â”€ Action: redirect â†’ AuthPhoneScreen (checkbox unchecked state)
        â”œâ”€â”€ Error: NOT_INVITED (picker) â†’ Â«ĞĞ±Ñ€Ğ°Ñ‚Ğ¸Ñ‚ĞµÑÑŒ Ğº Ğ°Ğ´Ğ¼Ğ¸Ğ½Ğ¸ÑÑ‚Ñ€Ğ°Ñ‚Ğ¾Ñ€ÑƒÂ»
        â”œâ”€â”€ Success (isNewUser=true) â†’ register push token â†’ HomeScreen + onboarding tooltip
        â””â”€â”€ Success (isNewUser=false) â†’ register push token â†’ HomeScreen
```

> **v1.4.2 (ĞŸĞ°Ñ‚Ñ‡ #2):** ĞŸĞ¾ÑĞ»Ğµ ÑƒÑĞ¿ĞµÑˆĞ½Ğ¾Ğ³Ğ¾ auth Ğ²Ñ‹Ğ·Ñ‹Ğ²Ğ°ĞµÑ‚ÑÑ `POST /auth/register-push` Ğ´Ğ»Ñ Ğ¿Ñ€Ğ¸Ğ²ÑĞ·ĞºĞ¸ push-Ñ‚Ğ¾ĞºĞµĞ½Ğ° Ğº ÑĞµÑÑĞ¸Ğ¸. ĞŸĞ¾Ğ²Ñ‚Ğ¾Ñ€Ğ½Ğ¾ Ğ²Ñ‹Ğ·Ñ‹Ğ²Ğ°ĞµÑ‚ÑÑ Ğ¿Ñ€Ğ¸ ĞºĞ°Ğ¶Ğ´Ğ¾Ğ¼ app launch Ğ¸ `onTokenRefresh`.

**Picker Auth:**
```
AuthPhoneScreen â†’ AuthOTPScreen â†’ register push token â†’ PickerOrderListScreen
â”œâ”€â”€ Success (role=picker, status=invitedâ†’active) â†’ register push token â†’ PickerOrderListScreen
â”œâ”€â”€ Error: NOT_INVITED â†’ Ğ±Ğ»Ğ¾ĞºĞ¸Ñ€ÑƒÑÑ‰Ğ¸Ğ¹ ÑĞºÑ€Ğ°Ğ½
â””â”€â”€ Error: ACCOUNT_DELETED â†’ Â«ĞĞºĞºĞ°ÑƒĞ½Ñ‚ ÑƒĞ´Ğ°Ğ»Ñ‘Ğ½Â»
```

### 3.2 Home & Catalog Flow

```
HomeScreen (ĞšĞ°Ñ€Ñ‚Ğ° Ğ¼Ğ°Ğ³Ğ°Ğ·Ğ¸Ğ½Ğ¾Ğ²)
â”œâ”€â”€ Address bar (top) â†’ tap â†’ AddressScreen
â”‚   â””â”€â”€ ĞŸÑ€Ğ¸Ğ¾Ñ€Ğ¸Ñ‚ĞµÑ‚: GPS â†’ selected address â†’ default address
â”œâ”€â”€ Store pin / list item â†’ StoreScreen
â”‚   â”œâ”€â”€ Info: Ğ°Ğ´Ñ€ĞµÑ, Ñ‡Ğ°ÑÑ‹, Ñ€Ğ°ÑÑÑ‚Ğ¾ÑĞ½Ğ¸Ğµ, â˜… toggle
â”‚   â”œâ”€â”€ Categories grid â†’ ProductListScreen (filtered)
â”‚   â””â”€â”€ Â«Ğ’ÑĞµ Ñ‚Ğ¾Ğ²Ğ°Ñ€Ñ‹Â» â†’ ProductListScreen
â”‚       â”œâ”€â”€ Filters: ĞºĞ°Ñ‚ĞµĞ³Ğ¾Ñ€Ğ¸Ñ, ÑĞ¾Ñ€Ñ‚Ğ¸Ñ€Ğ¾Ğ²ĞºĞ° (priceâ†‘â†“, nameâ†‘)
â”‚       â”œâ”€â”€ â˜… toggle per item (inline isFavorite)
â”‚       â””â”€â”€ Tap item â†’ ProductDetailScreen (NEW v1.4.0)
â”‚           â”œâ”€â”€ Image carousel (swipe, multi-photo)
â”‚           â”œâ”€â”€ Name, brand, description
â”‚           â”œâ”€â”€ Price: current_price, discount badge
â”‚           â”œâ”€â”€ ĞšĞ‘Ğ–Ğ£: kcal / proteins / fats / carbs per 100g
â”‚           â”œâ”€â”€ Country of origin, weight (netto)
â”‚           â”œâ”€â”€ â˜… Favorite toggle
â”‚           â”œâ”€â”€ Quantity selector (+/âˆ’ Ğ¸Ğ»Ğ¸ weight input Ğ´Ğ»Ñ kg)
â”‚           â”œâ”€â”€ Â«Ğ’ ĞºĞ¾Ñ€Ğ·Ğ¸Ğ½ÑƒÂ» â†’ POST /cart/items (upsert)
â”‚           â””â”€â”€ Deep link: robinfood://product/{productId}
â”œâ”€â”€ Radius slider / Radar button â†’ filter stores
â””â”€â”€ Notification bell â†’ OrderHistoryScreen (if order push)
```

### 3.3 Search Flow (NEW v1.4.0)

```
SearchScreen (tab)
â”œâ”€â”€ Search bar (auto-focus on tab tap)
â”œâ”€â”€ Typing â‰¥2 chars â†’ GET /search/suggest (debounce 300ms)
â”‚   â””â”€â”€ Suggestions list (max 7)
â”‚       â”œâ”€â”€ Tap suggestion â†’ SearchResultsScreen (pre-filled)
â”‚       â””â”€â”€ Keyboard Â«SearchÂ» â†’ SearchResultsScreen
â”œâ”€â”€ Recent searches (local storage, max 10)
â”‚   â””â”€â”€ Tap â†’ SearchResultsScreen
â””â”€â”€ Popular categories (optional, from API)

SearchResultsScreen
â”œâ”€â”€ Sections: Products | Stores | Categories
â”œâ”€â”€ Each section: horizontal scroll preview + Â«ĞŸĞ¾ĞºĞ°Ğ·Ğ°Ñ‚ÑŒ Ğ²ÑĞµÂ»
â”œâ”€â”€ Product card: image, name, price, store, â˜… isFavorite
â”œâ”€â”€ Store card: name, address, distance, â˜… isFavorite
â”œâ”€â”€ Category card: name, icon
â”œâ”€â”€ Tap product â†’ ProductDetailScreen
â”œâ”€â”€ Tap store â†’ StoreScreen
â”œâ”€â”€ Tap category â†’ ProductListScreen (filtered by category)
â”œâ”€â”€ searchMethod badge: Â«fulltextÂ» | Â«trigramÂ» (debug, hidden in prod)
â””â”€â”€ Empty state: Â«ĞĞ¸Ñ‡ĞµĞ³Ğ¾ Ğ½Ğµ Ğ½Ğ°Ğ¹Ğ´ĞµĞ½Ğ¾. ĞŸĞ¾Ğ¿Ñ€Ğ¾Ğ±ÑƒĞ¹Ñ‚Ğµ Ğ´Ñ€ÑƒĞ³Ğ¾Ğ¹ Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑÂ»
```

### 3.4 Cart & Checkout Flow (UPDATED v1.4.4)

> **Ğ¤Ğ¾Ñ€Ğ¼Ğ°Ñ‚Ñ‹ Ğ¾Ñ‚Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ñ (v1.4.4):** Ğ’ÑĞµ Ñ†ĞµĞ½Ñ‹, Ğ²ĞµÑĞ°, Ğ´Ğ°Ñ‚Ñ‹ Ğ½Ğ° ÑĞºÑ€Ğ°Ğ½Ğ°Ñ… Cart, Checkout, OrderTracking Ğ¾Ñ‚Ğ¾Ğ±Ñ€Ğ°Ğ¶Ğ°ÑÑ‚ÑÑ ÑĞ¾Ğ³Ğ»Ğ°ÑĞ½Ğ¾ Spec v1.4.4, sec 14.3 (Localization Policy): Ñ†ĞµĞ½Ğ° â€” `{amount/100} â‚½` Ñ Ğ·Ğ°Ğ¿ÑÑ‚Ğ¾Ğ¹-Ñ€Ğ°Ğ·Ğ´ĞµĞ»Ğ¸Ñ‚ĞµĞ»ĞµĞ¼ (`467,04 â‚½`), Ğ²ĞµÑ â€” `{value} ĞºĞ³` / `{count} ÑˆÑ‚`, Ğ´Ğ°Ñ‚Ğ° â€” `dd.MM.yyyy`, Ğ²Ñ€ĞµĞ¼Ñ â€” `HH:mm` (24h), timezone Ğ±Ğ¸Ğ·Ğ½ĞµÑ â€” MSK.

```
CartScreen (tab)
â”œâ”€â”€ IF empty â†’ empty state + Â«ĞŸĞµÑ€ĞµĞ¹Ñ‚Ğ¸ Ğº Ğ¿Ğ¾ĞºÑƒĞ¿ĞºĞ°Ğ¼Â»
â”œâ”€â”€ IF has items:
â”‚   â”œâ”€â”€ Grouped by store (sub-sections):
â”‚   â”‚   â”œâ”€â”€ Store header: name, subtotal
â”‚   â”‚   â””â”€â”€ Items: image, name, qty, price, +/âˆ’, delete
â”‚   â”œâ”€â”€ Warnings (yellow banner per item):
â”‚   â”‚   â”œâ”€â”€ ITEM_UNAVAILABLE â†’ Â«Ğ¢Ğ¾Ğ²Ğ°Ñ€ Ğ½ĞµĞ´Ğ¾ÑÑ‚ÑƒĞ¿ĞµĞ½Â» + strikethrough
â”‚   â”‚   â””â”€â”€ PRICE_CHANGED â†’ Â«Ğ¦ĞµĞ½Ğ° Ğ¸Ğ·Ğ¼ĞµĞ½Ğ¸Ğ»Ğ°ÑÑŒ: {old} â†’ {new}Â»
â”‚   â”œâ”€â”€ Total summary: N Ğ¼Ğ°Ğ³Ğ°Ğ·Ğ¸Ğ½Ğ¾Ğ², M Ñ‚Ğ¾Ğ²Ğ°Ñ€Ğ¾Ğ², Ğ¾Ğ±Ñ‰Ğ°Ñ ÑÑƒĞ¼Ğ¼Ğ°
â”‚   â”œâ”€â”€ Â«ĞÑ‡Ğ¸ÑÑ‚Ğ¸Ñ‚ÑŒ ĞºĞ¾Ñ€Ğ·Ğ¸Ğ½ÑƒÂ» â†’ confirm dialog â†’ DELETE /cart
â”‚   â””â”€â”€ Â«ĞÑ„Ğ¾Ñ€Ğ¼Ğ¸Ñ‚ÑŒ Ğ·Ğ°ĞºĞ°Ğ·Â» â†’
â”‚       â”‚
â”‚       â”œâ”€â”€ CHECK: active_orders + new_suborders â‰¤ 3
â”‚       â”‚   â””â”€â”€ IF exceeds â†’ Â«ĞœĞ°ĞºÑĞ¸Ğ¼ÑƒĞ¼ 3 Ğ°ĞºÑ‚Ğ¸Ğ²Ğ½Ñ‹Ñ… Ğ·Ğ°ĞºĞ°Ğ·Ğ°Â» (BR-CART-1)
â”‚       â”‚   â””â”€â”€ active = pending, confirmed, picking, ready, customer_arrived  â† v1.4.2: Ñ€Ğ°ÑÑˆĞ¸Ñ€ĞµĞ½Ğ¾
â”‚       â”‚
â”‚       â”œâ”€â”€ PaymentMethodScreen (UPDATED v1.4.2 â€” ĞŸĞ°Ñ‚Ñ‡ #5)
â”‚       â”‚   â”œâ”€â”€ Saved methods (Tinkoff cards)
â”‚       â”‚   â”œâ”€â”€ Ğ¡Ğ‘ĞŸ (NEW v1.4.2)                                              â† ĞŸĞ°Ñ‚Ñ‡ #5
â”‚       â”‚   â”œâ”€â”€ BNPL (Ğ¯Ğ½Ğ´ĞµĞºÑ Ğ¡Ğ¿Ğ»Ğ¸Ñ‚ / Ğ”Ğ¾Ğ»ÑĞ¼Ğ¸)
â”‚       â”‚   â”‚   â””â”€â”€ Per sub-order minAmount check
â”‚       â”‚   â””â”€â”€ Â«Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ ĞºĞ°Ñ€Ñ‚ÑƒÂ» â†’ Tinkoff binding
â”‚       â”‚
â”‚       â”œâ”€â”€ OrderConfirmationScreen (UPDATED)
â”‚       â”‚   â”œâ”€â”€ Summary per store:
â”‚       â”‚   â”‚   â”œâ”€â”€ Store name, items count, subtotal
â”‚       â”‚   â”‚   â””â”€â”€ Hold timer badge: Â«15 Ğ¼Ğ¸Ğ½ Ğ½Ğ° Ğ¿Ğ¾Ğ´Ñ‚Ğ²ĞµÑ€Ğ¶Ğ´ĞµĞ½Ğ¸ĞµÂ»
â”‚       â”‚   â”œâ”€â”€ Total across all stores
â”‚       â”‚   â”œâ”€â”€ Payment method
â”‚       â”‚   â””â”€â”€ Â«ĞŸĞ¾Ğ´Ñ‚Ğ²ĞµÑ€Ğ´Ğ¸Ñ‚ÑŒ Ğ¸ Ğ¾Ğ¿Ğ»Ğ°Ñ‚Ğ¸Ñ‚ÑŒÂ» â†’ POST /cart/checkout
â”‚       â”‚       â”œâ”€â”€ Creates N customer_order (one per store)
â”‚       â”‚       â”œâ”€â”€ Hold 15 min per sub-order
â”‚       â”‚       â”œâ”€â”€ Cart cleared
â”‚       â”‚       â”‚
â”‚       â”‚       â”œâ”€â”€ Provider â†’ Screen routing (NEW v1.4.3 â€” ĞŸĞ°Ñ‚Ñ‡ #5):
â”‚       â”‚       â”‚   â”œâ”€â”€ IF paymentUrl != null (tinkoff, BNPL) â†’ PaymentWebView
â”‚       â”‚       â”‚   â”‚   â””â”€â”€ â†’ OrderTrackingScreen (after callback)
â”‚       â”‚       â”‚   â””â”€â”€ IF qrCodeUrl != null (sbp) â†’ SBPPaymentSheet (NEW v1.4.3)
â”‚       â”‚       â”‚       â””â”€â”€ â†’ OrderTrackingScreen (after WS confirmation)
â”‚       â”‚       â”‚
â”‚       â”‚       â””â”€â”€ Error states:
â”‚       â”‚           â”œâ”€â”€ ACTIVE_ORDERS_LIMIT â†’ bottom sheet Ñ Ğ¾Ğ±ÑŠÑÑĞ½ĞµĞ½Ğ¸ĞµĞ¼
â”‚       â”‚           â”œâ”€â”€ BNPL_BELOW_MIN â†’ Â«ĞœĞ¸Ğ½Ğ¸Ğ¼ÑƒĞ¼ {min} â‚½ Ğ´Ğ»Ñ Ñ€Ğ°ÑÑÑ€Ğ¾Ñ‡ĞºĞ¸Â»
â”‚       â”‚           â””â”€â”€ PAYMENT_FAILED â†’ retry / change method
```

**Provider â†’ Screen mapping (NEW v1.4.3 â€” ĞŸĞ°Ñ‚Ñ‡ #5):**

| Provider | Checkout Field | Screen | UX Flow |
|----------|---------------|--------|---------|
| tinkoff | `paymentUrl` | `PaymentWebView` | WebView â†’ redirect â†’ callback |
| sbp | `qrCodeUrl` | `SBPPaymentSheet` | Bottom sheet QR â†’ deep link â†’ WS confirmation |
| yandex_split | `paymentUrl` | `PaymentWebView` | WebView â†’ BNPL form â†’ callback |
| dolyame | `paymentUrl` | `PaymentWebView` | WebView â†’ BNPL form â†’ callback |

**SBPPaymentSheet (NEW v1.4.3 â€” ĞŸĞ°Ñ‚Ñ‡ #5):**

```
SBPPaymentSheet (bottom sheet, modal)
â”œâ”€â”€ Trigger: checkout response contains qrCodeUrl (paymentMethod = 'sbp')
â”‚
â”œâ”€â”€ Content:
â”‚   â”œâ”€â”€ QR-ĞºĞ¾Ğ´ (rendered from qrCodeUrl)
â”‚   â”œâ”€â”€ Ğ¢ĞµĞºÑÑ‚: Â«ĞÑ‚ÑĞºĞ°Ğ½Ğ¸Ñ€ÑƒĞ¹Ñ‚Ğµ QR-ĞºĞ¾Ğ´ Ğ¸Ğ»Ğ¸ Ğ½Ğ°Ğ¶Ğ¼Ğ¸Ñ‚Ğµ ĞºĞ½Ğ¾Ğ¿ĞºÑƒ Ğ´Ğ»Ñ Ğ¾Ğ¿Ğ»Ğ°Ñ‚Ñ‹ Ñ‡ĞµÑ€ĞµĞ· Ğ¡Ğ‘ĞŸÂ»
â”‚   â”œâ”€â”€ ĞšĞ½Ğ¾Ğ¿ĞºĞ° Â«ĞÑ‚ĞºÑ€Ñ‹Ñ‚ÑŒ Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğµ Ğ±Ğ°Ğ½ĞºĞ°Â» â†’ deep link qrCodeUrl
â”‚   â”‚   â””â”€â”€ IF device has bank app â†’ opens bank app
â”‚   â”‚   â””â”€â”€ IF no bank app â†’ fallback: Â«Ğ£ÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ¸Ñ‚Ğµ Ğ±Ğ°Ğ½ĞºĞ¾Ğ²ÑĞºĞ¾Ğµ Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸ĞµÂ» Ğ¸Ğ»Ğ¸ QR scan
â”‚   â””â”€â”€ Ğ¢Ğ°Ğ¹Ğ¼ĞµÑ€ 15 Ğ¼Ğ¸Ğ½ (holdExpiresAt countdown)
â”‚
â”œâ”€â”€ States:
â”‚   â”œâ”€â”€ ĞĞ¶Ğ¸Ğ´Ğ°Ğ½Ğ¸Ğµ â†’ QR + Ñ‚Ğ°Ğ¹Ğ¼ĞµÑ€ (default state)
â”‚   â”œâ”€â”€ WS `order.status_changed(confirmed)` â†’ dismiss sheet â†’ OrderTrackingScreen
â”‚   â”œâ”€â”€ Ğ¢Ğ°Ğ¹Ğ¼ĞµÑ€ Ğ¸ÑÑ‚Ñ‘Ğº (hold expired) â†’ dismiss sheet â†’ toast Â«Ğ’Ñ€ĞµĞ¼Ñ Ğ¾Ğ¿Ğ»Ğ°Ñ‚Ñ‹ Ğ¸ÑÑ‚ĞµĞºĞ»Ğ¾Â» â†’ CartScreen
â”‚   â””â”€â”€ Ğ¡Ğ²ĞµÑ€Ğ½ÑƒÑ‚ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ĞµĞ¼ â†’ Ğ¾Ğ¿Ğ»Ğ°Ñ‚Ğ° Ğ¶Ğ´Ñ‘Ñ‚ Ğ² Ñ„Ğ¾Ğ½Ğµ (WS ÑĞ»ÑƒÑˆĞ°ĞµÑ‚)
â”‚       â””â”€â”€ WS confirmed â†’ push notification â†’ tap â†’ OrderTrackingScreen
â”‚
â”œâ”€â”€ Actions:
â”‚   â”œâ”€â”€ Drag down â†’ dismiss (payment still pending in background)
â”‚   â”œâ”€â”€ Â«ĞÑ‚Ğ¼ĞµĞ½Ğ¸Ñ‚ÑŒÂ» â†’ POST /orders/{id}/cancel â†’ CartScreen
â”‚   â””â”€â”€ Background â†’ WS keeps listening
â”‚
â””â”€â”€ A11y (WCAG 2.1 AA):
    â”œâ”€â”€ QR image: accessibilityLabel = Â«QR-ĞºĞ¾Ğ´ Ğ´Ğ»Ñ Ğ¾Ğ¿Ğ»Ğ°Ñ‚Ñ‹ Ñ‡ĞµÑ€ĞµĞ· Ğ¡Ğ‘ĞŸ. Ğ¡ÑƒĞ¼Ğ¼Ğ°: {amount} Ñ€ÑƒĞ±Ğ»ĞµĞ¹Â»
    â”œâ”€â”€ ĞšĞ½Ğ¾Ğ¿ĞºĞ° Â«ĞÑ‚ĞºÑ€Ñ‹Ñ‚ÑŒ Ğ±Ğ°Ğ½ĞºÂ»: primary focus, accessibilityHint = Â«ĞÑ‚ĞºÑ€Ğ¾ĞµÑ‚ Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğµ Ğ±Ğ°Ğ½ĞºĞ° Ğ´Ğ»Ñ Ğ¾Ğ¿Ğ»Ğ°Ñ‚Ñ‹Â»
    â”œâ”€â”€ Ğ¢Ğ°Ğ¹Ğ¼ĞµÑ€: accessibilityLiveRegion, announced every minute
    â””â”€â”€ Bottom sheet: accessibilityRole = Â«dialogÂ»
```

### 3.5 Order Tracking & History Flow (UPDATED v1.4.2)

> **Ğ¤Ğ¾Ñ€Ğ¼Ğ°Ñ‚Ñ‹ Ğ¾Ñ‚Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ñ (v1.4.4):** Ğ¦ĞµĞ½Ñ‹ Ğ½Ğ° ÑĞºÑ€Ğ°Ğ½Ğ°Ñ… OrderTracking, OrderDetail, OrderHistory Ğ¾Ñ‚Ğ¾Ğ±Ñ€Ğ°Ğ¶Ğ°ÑÑ‚ÑÑ Ğ² Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ‚Ğµ `{amount/100} â‚½` (e.g. `467,04 â‚½`), Ğ²ĞµÑĞ° â€” `{value} ĞºĞ³`, Ğ´Ğ°Ñ‚Ñ‹ â€” `dd.MM.yyyy`, Ğ²Ñ€ĞµĞ¼Ñ â€” `HH:mm`. ĞŸĞ¾Ğ»Ğ½Ğ°Ñ Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†Ğ°: Spec v1.4.4, sec 14.3.

```
OrderTrackingScreen (UPDATED v1.4.2 â€” ĞŸĞ°Ñ‚Ñ‡ #3)
â”œâ”€â”€ Tab bar: Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ | Ğ¡Ğ¾ÑÑ‚Ğ°Ğ² | Ğ§Ğ°Ñ‚
â”‚
â”œâ”€â”€ [Tab: Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ]
â”‚   â”œâ”€â”€ Progress bar: pending â†’ confirmed â†’ picking â†’ ready â†’ customer_arrived â†’ completed
â”‚   â”‚                                                  â†‘ NEW v1.4.2 â†‘
â”‚   â”œâ”€â”€ Store info: name, address, Â«ĞœĞ°Ñ€ÑˆÑ€ÑƒÑ‚Â» â†’ Ğ¯Ğ½Ğ´ĞµĞºÑ.ĞšĞ°Ñ€Ñ‚Ñ‹
â”‚   â”œâ”€â”€ Hold timer (if pending): countdown 15 min
â”‚   â”‚
â”‚   â”œâ”€â”€ Â«Ğ¯ Ğ½Ğ° Ğ¼ĞµÑÑ‚ĞµÂ» button (NEW v1.4.2 â€” ĞŸĞ°Ñ‚Ñ‡ #3):
â”‚   â”‚   â”œâ”€â”€ Visible: status = 'ready'
â”‚   â”‚   â”œâ”€â”€ Action: POST /orders/{id}/arrived
â”‚   â”‚   â”œâ”€â”€ Success: status â†’ 'customer_arrived', button disappears
â”‚   â”‚   â”œâ”€â”€ Push â†’ picker: Â«ĞŸĞ¾ĞºÑƒĞ¿Ğ°Ñ‚ĞµĞ»ÑŒ Ğ½Ğ° Ğ¼ĞµÑÑ‚ĞµÂ»
â”‚   â”‚   â””â”€â”€ Deep link: robinfood://order/{orderId}?action=arrived
â”‚   â”‚
â”‚   â”œâ”€â”€ Status-specific UI:
â”‚   â”‚   â”œâ”€â”€ pending: hold timer + Â«ĞÑ‚Ğ¼ĞµĞ½Ğ¸Ñ‚ÑŒ Ğ·Ğ°ĞºĞ°Ğ·Â»
â”‚   â”‚   â”œâ”€â”€ confirmed: Â«ĞĞ¶Ğ¸Ğ´Ğ°ĞµÑ‚ Ğ¿Ğ¸ĞºĞµÑ€Ğ°Â» + Â«ĞÑ‚Ğ¼ĞµĞ½Ğ¸Ñ‚ÑŒ Ğ·Ğ°ĞºĞ°Ğ·Â»
â”‚   â”‚   â”œâ”€â”€ picking: progress animation, picker name
â”‚   â”‚   â”œâ”€â”€ ready: Â«Ğ—Ğ°ĞºĞ°Ğ· ÑĞ¾Ğ±Ñ€Ğ°Ğ½!Â» banner + Â«Ğ¯ Ğ½Ğ° Ğ¼ĞµÑÑ‚ĞµÂ» CTA         â† NEW v1.4.2
â”‚   â”‚   â”œâ”€â”€ customer_arrived: Â«ĞĞ¶Ğ¸Ğ´Ğ°ĞµĞ¼ Ğ²Ñ‹Ğ´Ğ°Ñ‡ÑƒÂ» + spinner              â† NEW v1.4.2
â”‚   â”‚   â”œâ”€â”€ completed: success state â†’ Rating bottom sheet
â”‚   â”‚   â””â”€â”€ cancelled: reason banner + Â«Ğ’ Ğ¸ÑÑ‚Ğ¾Ñ€Ğ¸ÑÂ»
â”‚   â”‚
â”‚   â”œâ”€â”€ Â«ĞÑ‚Ğ¼ĞµĞ½Ğ¸Ñ‚ÑŒ Ğ·Ğ°ĞºĞ°Ğ·Â» (if status âˆˆ {pending, confirmed})
â”‚   â”‚   â””â”€â”€ NOT available in picking, ready, customer_arrived, completed  â† v1.4.2: ÑƒÑ‚Ğ¾Ñ‡Ğ½ĞµĞ½Ğ¾
â”‚   â””â”€â”€ WS updates: order.status_changed â†’ animate progress
â”‚
â”œâ”€â”€ [Tab: Ğ¡Ğ¾ÑÑ‚Ğ°Ğ²]
â”‚   â”œâ”€â”€ Items list with prices
â”‚   â”œâ”€â”€ Strikethrough: originalTotalAmount â†’ totalAmount (if differs)
â”‚   â”œâ”€â”€ Weight items: Â«â‰ˆ0.5 ĞºĞ³Â» â†’ Â«0.48 ĞºĞ³Â» after weigh
â”‚   â””â”€â”€ WS updates: order.totals_updated â†’ refresh prices
â”‚
â”œâ”€â”€ [Tab: Ğ§Ğ°Ñ‚] (UPDATED v1.4.2 â€” ĞŸĞ°Ñ‚Ñ‡ #3, BR-STATUS-1)
â”‚   â”œâ”€â”€ IF status âˆˆ {confirmed, picking, ready, customer_arrived}: full chat  â† v1.4.2: +ready, customer_arrived
â”‚   â”‚   â”œâ”€â”€ Messages list (cursor pagination, ASC)
â”‚   â”‚   â”œâ”€â”€ Input: text field (1â€“1000 chars) + send button
â”‚   â”‚   â”œâ”€â”€ WS: chat.message â†’ append message
â”‚   â”‚   â”œâ”€â”€ WS: chat.read â†’ update read receipts âœ“âœ“
â”‚   â”‚   â””â”€â”€ Rate limit indicator (10 msg/min)
â”‚   â”œâ”€â”€ IF status âˆˆ {completed, cancelled}: read-only
â”‚   â”‚   â””â”€â”€ Messages list (scrollable, no input)
â”‚   â”œâ”€â”€ IF status = pending: Â«Ğ§Ğ°Ñ‚ ÑÑ‚Ğ°Ğ½ĞµÑ‚ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿ĞµĞ½ Ğ¿Ğ¾ÑĞ»Ğµ Ğ¿Ğ¾Ğ´Ñ‚Ğ²ĞµÑ€Ğ¶Ğ´ĞµĞ½Ğ¸ÑÂ»
â”‚   â””â”€â”€ Deep link: robinfood://order/{orderId}?tab=chat
â”‚
â””â”€â”€ Completion flow (UPDATED v1.4.1 â€” ĞŸĞ°Ñ‚Ñ‡ #1):
    â””â”€â”€ status=completed â†’ Rating bottom sheet
        â”œâ”€â”€ â­ 1â€“5 ĞµĞ´Ğ¸Ğ½Ğ°Ñ Ğ¾Ñ†ĞµĞ½ĞºĞ° (star selector)
        â”œâ”€â”€ ĞšĞ¾Ğ¼Ğ¼ĞµĞ½Ñ‚Ğ°Ñ€Ğ¸Ğ¹ (Ğ¾Ğ¿Ñ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾, max 500 ÑĞ¸Ğ¼Ğ²Ğ¾Ğ»Ğ¾Ğ²)
        â”œâ”€â”€ Â«ĞÑ‚Ğ¿Ñ€Ğ°Ğ²Ğ¸Ñ‚ÑŒÂ» â†’ POST /orders/{id}/rate
        â”œâ”€â”€ Â«ĞŸÑ€Ğ¾Ğ¿ÑƒÑÑ‚Ğ¸Ñ‚ÑŒÂ» â†’ dismiss (Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ Ğ¾Ñ†ĞµĞ½Ğ¸Ñ‚ÑŒ Ğ¿Ğ¾Ğ·Ğ¶Ğµ Ğ¸Ğ· OrderDetailScreen)
        â””â”€â”€ Idempotent: Ğ¿Ğ¾Ğ²Ñ‚Ğ¾Ñ€Ğ½Ğ°Ñ Ğ¾Ñ†ĞµĞ½ĞºĞ° Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ÑĞµÑ‚ ÑÑƒÑ‰ĞµÑÑ‚Ğ²ÑƒÑÑ‰ÑƒÑ

OrderHistoryScreen (UPDATED v1.4.2 â€” ĞŸĞ°Ñ‚Ñ‡ #3)
â”œâ”€â”€ API: GET /api/v1/orders?status={filter}&cursor={cursor}
â”œâ”€â”€ Filter tabs: ĞĞºÑ‚Ğ¸Ğ²Ğ½Ñ‹Ğµ | Ğ—Ğ°Ğ²ĞµÑ€ÑˆÑ‘Ğ½Ğ½Ñ‹Ğµ | ĞÑ‚Ğ¼ĞµĞ½Ñ‘Ğ½Ğ½Ñ‹Ğµ | Ğ’ÑĞµ
â”‚   â”œâ”€â”€ Â«ĞĞºÑ‚Ğ¸Ğ²Ğ½Ñ‹ĞµÂ» â†’ status=active (pending|confirmed|picking|ready|customer_arrived)  â† v1.4.2: +ready, customer_arrived
â”‚   â”œâ”€â”€ Â«Ğ—Ğ°Ğ²ĞµÑ€ÑˆÑ‘Ğ½Ğ½Ñ‹ĞµÂ» â†’ status=completed
â”‚   â”œâ”€â”€ Â«ĞÑ‚Ğ¼ĞµĞ½Ñ‘Ğ½Ğ½Ñ‹ĞµÂ» â†’ status=cancelled
â”‚   â””â”€â”€ Â«Ğ’ÑĞµÂ» â†’ status=all (default)
â”œâ”€â”€ Order card:
â”‚   â”œâ”€â”€ storeName, status badge, totalAmount
â”‚   â”‚   â””â”€â”€ Status badge colors:
â”‚   â”‚       â”œâ”€â”€ pending/confirmed/picking: ğŸ”µ blue
â”‚   â”‚       â”œâ”€â”€ ready: ğŸŸ¢ green Â«Ğ“Ğ¾Ñ‚Ğ¾Ğ²Â»                                â† NEW v1.4.2
â”‚   â”‚       â”œâ”€â”€ customer_arrived: ğŸŸ¢ green Â«ĞĞ¶Ğ¸Ğ´Ğ°ĞµÑ‚ Ğ²Ñ‹Ğ´Ğ°Ñ‡Ğ¸Â»            â† NEW v1.4.2
â”‚   â”‚       â”œâ”€â”€ completed: âšª gray
â”‚   â”‚       â””â”€â”€ cancelled: ğŸ”´ red
â”‚   â”œâ”€â”€ itemsCount, createdAt
â”‚   â””â”€â”€ Tap â†’
â”‚       â”œâ”€â”€ IF status âˆˆ {pending, confirmed, picking, ready, customer_arrived} â†’ OrderTrackingScreen  â† v1.4.2: +ready, customer_arrived
â”‚       â””â”€â”€ IF status âˆˆ {completed, cancelled} â†’ OrderDetailScreen
â”œâ”€â”€ Cursor-based pagination (infinite scroll)
â”œâ”€â”€ Deep link: robinfood://orders
â””â”€â”€ Empty state: Â«ĞŸĞ¾ĞºĞ° Ğ½ĞµÑ‚ Ğ·Ğ°ĞºĞ°Ğ·Ğ¾Ğ²Â»

OrderDetailScreen (UPDATED v1.4.1 â€” ĞŸĞ°Ñ‚Ñ‡ #1)
â”œâ”€â”€ Ğ¡Ğ¾ÑÑ‚Ğ°Ğ², ÑÑƒĞ¼Ğ¼Ñ‹, originalTotalAmount strikethrough
â”œâ”€â”€ IF completed AND has rating:
â”‚   â””â”€â”€ ĞÑ‚Ğ¾Ğ±Ñ€Ğ°Ğ¶Ğ°ĞµÑ‚ÑÑ: â­ {rating} + ĞºĞ¾Ğ¼Ğ¼ĞµĞ½Ñ‚Ğ°Ñ€Ğ¸Ğ¹
â”œâ”€â”€ IF completed AND no rating:
â”‚   â””â”€â”€ CTA: Â«ĞÑ†ĞµĞ½Ğ¸Ñ‚Ğµ Ğ·Ğ°ĞºĞ°Ğ·Â» â†’ Rating bottom sheet
â””â”€â”€ Back â†’ OrderHistoryScreen
```

### 3.6 Favorites Flow (UPDATED v1.4.0)

```
FavoritesScreen (tab)
â”œâ”€â”€ Filter tabs: Ğ’ÑĞµ | Ğ¢Ğ¾Ğ²Ğ°Ñ€Ñ‹ | ĞœĞ°Ğ³Ğ°Ğ·Ğ¸Ğ½Ñ‹
â”œâ”€â”€ Product cards:
â”‚   â”œâ”€â”€ Image, name, price, store name
â”‚   â”œâ”€â”€ Â«Ğ’ ĞºĞ¾Ñ€Ğ·Ğ¸Ğ½ÑƒÂ» quick action
â”‚   â””â”€â”€ Swipe left â†’ delete
â”œâ”€â”€ Store cards:
â”‚   â”œâ”€â”€ Name, address, distance
â”‚   â””â”€â”€ Tap â†’ StoreScreen
â”œâ”€â”€ Multi-select mode â†’ batch delete (DELETE /favorites)
â”œâ”€â”€ Empty state per type:
â”‚   â”œâ”€â”€ Ğ¢Ğ¾Ğ²Ğ°Ñ€Ñ‹: Â«Ğ”Ğ¾Ğ±Ğ°Ğ²ÑŒÑ‚Ğµ Ñ‚Ğ¾Ğ²Ğ°Ñ€Ñ‹ Ğ² Ğ¸Ğ·Ğ±Ñ€Ğ°Ğ½Ğ½Ğ¾Ğµ â˜…Â»
â”‚   â””â”€â”€ ĞœĞ°Ğ³Ğ°Ğ·Ğ¸Ğ½Ñ‹: Â«Ğ”Ğ¾Ğ±Ğ°Ğ²ÑŒÑ‚Ğµ Ğ¼Ğ°Ğ³Ğ°Ğ·Ğ¸Ğ½Ñ‹ Ğ² Ğ¸Ğ·Ğ±Ñ€Ğ°Ğ½Ğ½Ğ¾Ğµ â˜…Â»
â””â”€â”€ Inline â˜… sync: isFavorite updates across all screens
```

**â˜… Toggle â€” unified behavior:**
- Tap â˜… on any screen â†’ `POST /favorites` (idempotent upsert)
- Tap â˜… again â†’ `DELETE /favorites/{id}`
- Screens with â˜…: `StoreScreen`, `ProductListScreen`, `ProductDetailScreen`, `SearchResultsScreen`

### 3.7 Profile & Settings Flow (UPDATED v1.4.2)

```
ProfileScreen (tab)
â”œâ”€â”€ User info: fullName (editable), phone (read-only)
â”œâ”€â”€ Menu items:
â”‚   â”œâ”€â”€ Â«Ğ¡Ğ¿Ğ¾ÑĞ¾Ğ±Ñ‹ Ğ¾Ğ¿Ğ»Ğ°Ñ‚Ñ‹Â» â†’ PaymentMethodsScreen
â”‚   â”œâ”€â”€ Â«ĞĞ´Ñ€ĞµÑĞ°Â» â†’ AddressScreen (UPDATED v1.4.0)
â”‚   â”‚   â”œâ”€â”€ Address list (max 5), default badge â­
â”‚   â”‚   â”œâ”€â”€ Â«Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ğ°Ğ´Ñ€ĞµÑÂ» â†’ AddressEditScreen (NEW v1.4.0)
â”‚   â”‚   â”‚   â”œâ”€â”€ Search input â†’ Yandex Geocoding suggest (client-side)
â”‚   â”‚   â”‚   â”œâ”€â”€ Map preview with pin
â”‚   â”‚   â”‚   â”œâ”€â”€ Label: Ğ”Ğ¾Ğ¼ / Ğ Ğ°Ğ±Ğ¾Ñ‚Ğ° / custom
â”‚   â”‚   â”‚   â”œâ”€â”€ Â«Ğ¡Ğ´ĞµĞ»Ğ°Ñ‚ÑŒ Ğ¾ÑĞ½Ğ¾Ğ²Ğ½Ñ‹Ğ¼Â» toggle (is_default)
â”‚   â”‚   â”‚   â””â”€â”€ Â«Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½Ğ¸Ñ‚ÑŒÂ» â†’ POST /addresses
â”‚   â”‚   â”œâ”€â”€ Tap address â†’ AddressEditScreen (edit mode) â†’ PUT /addresses/{id}
â”‚   â”‚   â”œâ”€â”€ Swipe left â†’ delete (auto-promote next if default)
â”‚   â”‚   â””â”€â”€ Error: MAX_ADDRESSES (5) â†’ Â«Ğ£Ğ´Ğ°Ğ»Ğ¸Ñ‚Ğµ Ğ¾Ğ´Ğ¸Ğ½ Ğ¸Ğ· Ğ°Ğ´Ñ€ĞµÑĞ¾Ğ²Â»
â”‚   â”œâ”€â”€ Â«Smart AlertsÂ» â†’ SmartAlertsScreen (NEW v1.4.0)
â”‚   â”‚   â”œâ”€â”€ Active alerts list (max 20)
â”‚   â”‚   â”‚   â”œâ”€â”€ Card: product/category name, trigger icon, schedule badge
â”‚   â”‚   â”‚   â”œâ”€â”€ Toggle: Ğ²ĞºĞ»/Ğ²Ñ‹ĞºĞ» per alert
â”‚   â”‚   â”‚   â”œâ”€â”€ Tap â†’ AlertDetailScreen (NEW v1.4.0)
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Entity: product Ğ¸Ğ»Ğ¸ category
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Trigger: price_drop / back_in_stock / price_threshold
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ IF price_threshold â†’ input: Ñ†ĞµĞ»ĞµĞ²Ğ°Ñ Ñ†ĞµĞ½Ğ°
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Schedule: Ğ£Ñ‚Ñ€Ğ¾ / Ğ’ĞµÑ‡ĞµÑ€ / Ğ¦ĞµĞ»Ñ‹Ğ¹ Ğ´ĞµĞ½ÑŒ
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ History: Ğ¿Ğ¾ÑĞ»ĞµĞ´Ğ½Ğ¸Ğµ ÑÑ€Ğ°Ğ±Ğ°Ñ‚Ñ‹Ğ²Ğ°Ğ½Ğ¸Ñ (GET /smart-alerts/{id}/history)
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ Â«Ğ£Ğ´Ğ°Ğ»Ğ¸Ñ‚ÑŒÂ» â†’ DELETE /smart-alerts/{id}
â”‚   â”‚   â”‚   â””â”€â”€ Swipe left â†’ delete
â”‚   â”‚   â”œâ”€â”€ Â«Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ Ğ°Ğ»ĞµÑ€Ñ‚Â» â†’ AlertDetailScreen (create mode)
â”‚   â”‚   â”‚   â””â”€â”€ Ğ˜Ğ»Ğ¸ Ğ¸Ğ· ProductDetailScreen: Â«ğŸ”” Ğ¡Ğ»ĞµĞ´Ğ¸Ñ‚ÑŒ Ğ·Ğ° Ñ†ĞµĞ½Ğ¾Ğ¹Â»
â”‚   â”‚   â””â”€â”€ Error: MAX_ALERTS (20) â†’ Â«Ğ£Ğ´Ğ°Ğ»Ğ¸Ñ‚Ğµ Ğ¾Ğ´Ğ¸Ğ½ Ğ¸Ğ· Ğ°Ğ»ĞµÑ€Ñ‚Ğ¾Ğ²Â»
â”‚   â”œâ”€â”€ Â«ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸Â» â†’ SettingsScreen (UPDATED v1.4.2)
â”‚   â”‚   â”œâ”€â”€ Push notifications toggles
â”‚   â”‚   â”œâ”€â”€ Theme (light/dark/system)
â”‚   â”‚   â”œâ”€â”€ Â«Ğ£Ğ´Ğ°Ğ»Ğ¸Ñ‚ÑŒ Ğ°ĞºĞºĞ°ÑƒĞ½Ñ‚Â» (UPDATED v1.4.2)
â”‚   â”‚   â”‚   â”œâ”€â”€ IF has active orders â†’ disabled + tooltip BR-DEL-1
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ active = pending, confirmed, picking, ready, customer_arrived  â† v1.4.2
â”‚   â”‚   â”‚   â”œâ”€â”€ Tap â†’ Confirmation dialog:
â”‚   â”‚   â”‚   â”‚   Â«ĞĞºĞºĞ°ÑƒĞ½Ñ‚ Ğ±ÑƒĞ´ĞµÑ‚ ÑƒĞ´Ğ°Ğ»Ñ‘Ğ½ Ñ‡ĞµÑ€ĞµĞ· 30 Ğ´Ğ½ĞµĞ¹.
â”‚   â”‚   â”‚   â”‚    Ğ’Ñ‹ Ğ¼Ğ¾Ğ¶ĞµÑ‚Ğµ Ğ¾Ñ‚Ğ¼ĞµĞ½Ğ¸Ñ‚ÑŒ Ğ² Ğ»ÑĞ±Ğ¾Ğ¹ Ğ¼Ğ¾Ğ¼ĞµĞ½Ñ‚.Â»
â”‚   â”‚   â”‚   â”œâ”€â”€ Optional: reason input
â”‚   â”‚   â”‚   â”œâ”€â”€ Â«ĞŸĞ¾Ğ´Ñ‚Ğ²ĞµÑ€Ğ´Ğ¸Ñ‚ÑŒÂ» â†’ POST /profile/delete
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ProfileScreen shows: Â«Ğ£Ğ´Ğ°Ğ»ĞµĞ½Ğ¸Ğµ: {scheduledAt}Â» + Â«ĞÑ‚Ğ¼ĞµĞ½Ğ¸Ñ‚ÑŒÂ»
â”‚   â”‚   â”‚   â””â”€â”€ Â«ĞÑ‚Ğ¼ĞµĞ½Ğ¸Ñ‚ÑŒ ÑƒĞ´Ğ°Ğ»ĞµĞ½Ğ¸ĞµÂ» â†’ POST /profile/delete/cancel
â”‚   â”‚   â””â”€â”€ Â«Ğ’Ñ‹Ğ¹Ñ‚Ğ¸Â» â†’ POST /auth/logout â†’ AuthPhoneScreen
â”‚   â””â”€â”€ Â«Ğ—Ğ°ĞºĞ°Ğ·Ñ‹Â» â†’ OrderHistoryScreen
â””â”€â”€ Deletion pending banner (if applicable):
    â””â”€â”€ Yellow bar: Â«ĞĞºĞºĞ°ÑƒĞ½Ñ‚ Ğ±ÑƒĞ´ĞµÑ‚ ÑƒĞ´Ğ°Ğ»Ñ‘Ğ½ {date}Â» + [ĞÑ‚Ğ¼ĞµĞ½Ğ¸Ñ‚ÑŒ]
```

### 3.8 Picker Flow (UPDATED v1.4.2 â€” ĞŸĞ°Ñ‚Ñ‡ #3)

```
Picker Auth:
AuthPhoneScreen â†’ AuthOTPScreen â†’ register push token â†’ PickerOrderListScreen

PickerOrderListScreen (tab: Orders, UPDATED v1.4.2)
â”œâ”€â”€ Tabs: ĞĞ¾Ğ²Ñ‹Ğµ | Ğ’ ÑĞ±Ğ¾Ñ€ĞºĞµ | Ğ“Ğ¾Ñ‚Ğ¾Ğ²Ñ‹Ğµ | Ğ’Ñ‹Ğ´Ğ°Ñ‡Ğ° | Ğ—Ğ°Ğ²ĞµÑ€ÑˆÑ‘Ğ½Ğ½Ñ‹Ğµ
â”‚   â”œâ”€â”€ Â«ĞĞ¾Ğ²Ñ‹ĞµÂ» â†’ status=confirmed (Ğ¾Ğ¶Ğ¸Ğ´Ğ°ÑÑ‚ Ğ¿Ñ€Ğ¸Ğ½ÑÑ‚Ğ¸Ñ)
â”‚   â”œâ”€â”€ Â«Ğ’ ÑĞ±Ğ¾Ñ€ĞºĞµÂ» â†’ status=picking (Ñ‚ĞµĞºÑƒÑ‰Ğ°Ñ ÑĞ±Ğ¾Ñ€ĞºĞ°)
â”‚   â”œâ”€â”€ Â«Ğ“Ğ¾Ñ‚Ğ¾Ğ²Ñ‹ĞµÂ» â†’ status=ready (ÑĞ¾Ğ±Ñ€Ğ°Ğ½, Ğ¾Ğ¶Ğ¸Ğ´Ğ°ĞµÑ‚ Ğ¿Ğ¾ĞºÑƒĞ¿Ğ°Ñ‚ĞµĞ»Ñ)          â† NEW v1.4.2
â”‚   â”œâ”€â”€ Â«Ğ’Ñ‹Ğ´Ğ°Ñ‡Ğ°Â» â†’ status=customer_arrived (Ğ¿Ğ¾ĞºÑƒĞ¿Ğ°Ñ‚ĞµĞ»ÑŒ Ğ½Ğ° Ğ¼ĞµÑÑ‚Ğµ)       â† NEW v1.4.2
â”‚   â””â”€â”€ Â«Ğ—Ğ°Ğ²ĞµÑ€ÑˆÑ‘Ğ½Ğ½Ñ‹ĞµÂ» â†’ status=completed
â”œâ”€â”€ Order card: #, store, items count, total, created_at
â”‚   â””â”€â”€ Â«Ğ’Ñ‹Ğ´Ğ°Ñ‡Ğ°Â» tab: green highlight ğŸŸ¢ per card                     â† NEW v1.4.2
â”œâ”€â”€ Tap â†’ PickerOrderDetailScreen
â”‚   â”œâ”€â”€ Tab bar: Ğ¢Ğ¾Ğ²Ğ°Ñ€Ñ‹ | Ğ§Ğ°Ñ‚
â”‚   â”‚
â”‚   â”œâ”€â”€ [Tab: Ğ¢Ğ¾Ğ²Ğ°Ñ€Ñ‹]
â”‚   â”‚   â”œâ”€â”€ Items checklist
â”‚   â”‚   â”œâ”€â”€ Weight items: Â«Ğ’Ğ·Ğ²ĞµÑĞ¸Ñ‚ÑŒÂ» â†’ input actual_quantity
â”‚   â”‚   â”‚   â””â”€â”€ PUT /picker/orders/{id}/item/{itemId}/weigh
â”‚   â”‚   â”‚   â””â”€â”€ Warning: BNPL_BELOW_MIN (yellow badge)
â”‚   â”‚   â”œâ”€â”€ Unavailable: Â«Ğ¢Ğ¾Ğ²Ğ°Ñ€ Ğ¾Ñ‚ÑÑƒÑ‚ÑÑ‚Ğ²ÑƒĞµÑ‚Â» â†’ replacement flow
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ Actions by status:
â”‚   â”‚   â”‚   â”œâ”€â”€ confirmed: Â«ĞŸÑ€Ğ¸Ğ½ÑÑ‚ÑŒÂ» â†’ PUT /picker/orders/{id}/accept
â”‚   â”‚   â”‚   â”œâ”€â”€ picking: Â«Ğ—Ğ°Ğ²ĞµÑ€ÑˆĞ¸Ñ‚ÑŒ ÑĞ±Ğ¾Ñ€ĞºÑƒÂ» â†’ PUT /picker/orders/{id}/complete
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ BR-PICK-4 guard: Â«Ğ’Ğ·Ğ²ĞµÑÑŒÑ‚Ğµ Ğ²ÑĞµ Ñ‚Ğ¾Ğ²Ğ°Ñ€Ñ‹Â» (if unweighed)
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ BR-BNPL-6: cancelled â†’ alert with items for return
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ Success â†’ status=ready, push to customer Â«Ğ—Ğ°ĞºĞ°Ğ· ÑĞ¾Ğ±Ñ€Ğ°Ğ½Â»   â† v1.4.2: Ğ±Ñ‹Ğ»Ğ¾ completed
â”‚   â”‚   â”‚   â”œâ”€â”€ ready: Â«ĞŸĞ¾Ğ´Ñ‚Ğ²ĞµÑ€Ğ´Ğ¸Ñ‚ÑŒ Ğ²Ñ‹Ğ´Ğ°Ñ‡ÑƒÂ» CTA                               â† NEW v1.4.2
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ POST /picker/orders/{id}/confirm-pickup
â”‚   â”‚   â”‚   â”‚       â””â”€â”€ Success â†’ status=completed, push Â«Ğ—Ğ°ĞºĞ°Ğ· Ğ²Ñ‹Ğ´Ğ°Ğ½Â»
â”‚   â”‚   â”‚   â””â”€â”€ customer_arrived: Â«ĞŸĞ¾Ğ´Ñ‚Ğ²ĞµÑ€Ğ´Ğ¸Ñ‚ÑŒ Ğ²Ñ‹Ğ´Ğ°Ñ‡ÑƒÂ» CTA (green)             â† NEW v1.4.2
â”‚   â”‚   â”‚       â””â”€â”€ POST /picker/orders/{id}/confirm-pickup
â”‚   â”‚   â”‚           â””â”€â”€ Success â†’ status=completed, push Â«Ğ—Ğ°ĞºĞ°Ğ· Ğ²Ñ‹Ğ´Ğ°Ğ½Â»
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ QR Scan flow (status=ready/customer_arrived):
â”‚   â”‚       â”œâ”€â”€ Â«Ğ¡ĞºĞ°Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ QRÂ» â†’ PickerScanScreen
â”‚   â”‚       â”‚   â”œâ”€â”€ Camera with frame
â”‚   â”‚       â”‚   â”œâ”€â”€ Success â†’ confirm pickup dialog
â”‚   â”‚       â”‚   â”œâ”€â”€ Error 3x â†’ manual lookup fallback
â”‚   â”‚       â”‚   â””â”€â”€ Â«Ğ’Ğ²ĞµÑÑ‚Ğ¸ Ğ²Ñ€ÑƒÑ‡Ğ½ÑƒÑÂ» â†’ order number input
â”‚   â”‚       â””â”€â”€ Â«ĞŸĞ¾Ğ´Ñ‚Ğ²ĞµÑ€Ğ´Ğ¸Ñ‚ÑŒ Ğ²Ñ‹Ğ´Ğ°Ñ‡ÑƒÂ» â†’ POST /picker/orders/{id}/confirm-pickup
â”‚   â”‚
â”‚   â””â”€â”€ [Tab: Ğ§Ğ°Ñ‚] (UPDATED v1.4.2 â€” ĞŸĞ°Ñ‚Ñ‡ #3)
â”‚       â”œâ”€â”€ Same as buyer ChatView (symmetric)
â”‚       â”œâ”€â”€ Ğ”Ğ¾ÑÑ‚ÑƒĞ¿ĞµĞ½ Ğ´Ğ»Ñ Ğ·Ğ°Ğ¿Ğ¸ÑĞ¸: confirmed, picking, ready, customer_arrived  â† v1.4.2: +ready, customer_arrived
â”‚       â”œâ”€â”€ Read-only: completed, cancelled
â”‚       â”œâ”€â”€ Push (app in background): Â«ĞŸĞ¾ĞºÑƒĞ¿Ğ°Ñ‚ĞµĞ»ÑŒ Ğ½Ğ°Ğ¿Ğ¸ÑĞ°Ğ»Â»
â”‚       â””â”€â”€ Rate limit: 10 msg/min
â”‚
â”œâ”€â”€ Notification: customer Â«Ğ¯ Ğ½Ğ° Ğ¼ĞµÑÑ‚ĞµÂ» â†’ green highlight ğŸŸ¢ + sound alert   â† v1.4.2: ÑƒÑ‚Ğ¾Ñ‡Ğ½ĞµĞ½Ğ¾
â””â”€â”€ Batch mode (v1.2): select up to 3 â†’ merged items view
```

---

## 4. Deep Links (UPDATED v1.4.2)

| Deep link | Destination | Ğ’ĞµÑ€ÑĞ¸Ñ | Fallback (not auth) |
|-----------|-------------|--------|---------------------|
| `robinfood://store/{storeId}` | StoreScreen | v1.3.1 | AuthPhoneScreen â†’ redirect |
| `robinfood://order/{orderId}` | OrderTrackingScreen | v1.3.1 | AuthPhoneScreen â†’ redirect |
| `robinfood://product/{productId}` | ProductDetailScreen | NEW v1.4.0 | AuthPhoneScreen â†’ redirect |
| `robinfood://order/{orderId}?tab=chat` | OrderTrackingScreen â†’ Chat tab | NEW v1.4.0 | AuthPhoneScreen â†’ redirect |
| `robinfood://orders` | OrderHistoryScreen | NEW v1.4.1 | AuthPhoneScreen â†’ redirect |
| `robinfood://order/{orderId}?action=arrived` | OrderTrackingScreen â†’ trigger Â«Ğ¯ Ğ½Ğ° Ğ¼ĞµÑÑ‚ĞµÂ» | **NEW v1.4.2** | AuthPhoneScreen â†’ redirect |

**Handling rules:**
- ĞĞµ Ğ°Ğ²Ñ‚Ğ¾Ñ€Ğ¸Ğ·Ğ¾Ğ²Ğ°Ğ½ â†’ ÑĞ¾Ñ…Ñ€Ğ°Ğ½Ğ¸Ñ‚ÑŒ deep link â†’ AuthPhoneScreen â†’ Ğ¿Ğ¾ÑĞ»Ğµ auth redirect
- ĞĞ±ÑŠĞµĞºÑ‚ Ğ½Ğµ Ğ½Ğ°Ğ¹Ğ´ĞµĞ½ â†’ Â«Ğ¡Ñ‚Ñ€Ğ°Ğ½Ğ¸Ñ†Ğ° Ğ½Ğµ Ğ½Ğ°Ğ¹Ğ´ĞµĞ½Ğ°Â» + ĞºĞ½Ğ¾Ğ¿ĞºĞ° Â«ĞĞ° Ğ³Ğ»Ğ°Ğ²Ğ½ÑƒÑÂ»
- `?action=arrived` â†’ ĞµÑĞ»Ğ¸ `status â‰  ready`, deep link Ğ¾Ñ‚ĞºÑ€Ñ‹Ğ²Ğ°ĞµÑ‚ OrderTrackingScreen Ğ±ĞµĞ· trigger
- Picker deep links: Ğ½Ğµ Ğ¿Ğ¾Ğ´Ğ´ĞµÑ€Ğ¶Ğ¸Ğ²Ğ°ÑÑ‚ÑÑ Ğ² MVP (Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ buyer app)

---

## 5. Offline Behavior

| Screen | ĞŸĞ¾Ğ²ĞµĞ´ĞµĞ½Ğ¸Ğµ | ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ |
|--------|-----------|----------|
| **Buyer (Ğ²ÑĞµ)** | Blocking | ĞŸĞ¾Ğ»Ğ½Ğ¾ÑĞºÑ€Ğ°Ğ½Ğ½Ñ‹Ğ¹ overlay Â«ĞĞµÑ‚ Ğ¿Ğ¾Ğ´ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ñ Ğº Ğ¸Ğ½Ñ‚ĞµÑ€Ğ½ĞµÑ‚Ñƒ. ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑŒÑ‚Ğµ ÑĞ¾ĞµĞ´Ğ¸Ğ½ĞµĞ½Ğ¸ĞµÂ» + retry button |
| **SBPPaymentSheet** | Blocking | QR-ĞºĞ¾Ğ´ Ğ½Ğµ Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ÑĞµÑ‚ÑÑ; Ğ¿Ñ€Ğ¸ reconnect â†’ WS Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ÑĞµÑ‚ Ñ‚ĞµĞºÑƒÑ‰Ğ¸Ğ¹ ÑÑ‚Ğ°Ñ‚ÑƒÑ Ğ·Ğ°ĞºĞ°Ğ·Ğ° *(NEW v1.4.3)* |
| **Picker (Ğ²ÑĞµ)** | Local queue | Ğ”ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ñ (weigh, replace, cancel, chat send) ĞºÑÑˆĞ¸Ñ€ÑƒÑÑ‚ÑÑ Ğ»Ğ¾ĞºĞ°Ğ»ÑŒĞ½Ğ¾ |
| **Picker reconnect** | Auto-sync | ĞÑ‡ĞµÑ€ĞµĞ´ÑŒ Ğ²Ğ¾ÑĞ¿Ñ€Ğ¾Ğ¸Ğ·Ğ²Ğ¾Ğ´Ğ¸Ñ‚ÑÑ Ğ² Ğ¿Ğ¾Ñ€ÑĞ´ĞºĞµ FIFO. ĞšĞ¾Ğ½Ñ„Ğ»Ğ¸ĞºÑ‚Ñ‹ â†’ conflict resolution dialog |

---

## 6. Accessibility (A11y, UPDATED v1.4.4)

Ğ’ÑĞµ ÑĞºÑ€Ğ°Ğ½Ñ‹ ÑĞ¾Ğ¾Ñ‚Ğ²ĞµÑ‚ÑÑ‚Ğ²ÑƒÑÑ‚ **WCAG 2.1/2.2 AA**:

- Touch targets â‰¥ 44Ã—44 pt
- Color contrast â‰¥ 4.5:1 (normal text), â‰¥ 3:1 (large text)
- All interactive elements: `accessibilityLabel` + `accessibilityHint`
- Focus order: logical top-to-bottom, left-to-right
- Screen reader announcements Ğ¿Ñ€Ğ¸ WS-Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸ÑÑ… (status change, new message)
- â˜… Favorite toggle: `accessibilityRole="switch"`, state announced
- Chat messages: `accessibilityRole="text"`, sender + timestamp announced
- Rating stars: `accessibilityRole="adjustable"`, value announced (e.g. Â«3 Ğ¸Ğ· 5Â»)
- Â«Ğ¯ Ğ½Ğ° Ğ¼ĞµÑÑ‚ĞµÂ» button: `accessibilityLabel="ĞŸĞ¾Ğ´Ñ‚Ğ²ĞµÑ€Ğ´Ğ¸Ñ‚ÑŒ Ğ¿Ñ€Ğ¸Ğ±Ñ‹Ñ‚Ğ¸Ğµ"`, `accessibilityHint="ĞĞ°Ğ¶Ğ¼Ğ¸Ñ‚Ğµ, Ñ‡Ñ‚Ğ¾Ğ±Ñ‹ ÑĞ¾Ğ¾Ğ±Ñ‰Ğ¸Ñ‚ÑŒ Ğ¿Ğ¸ĞºĞµÑ€Ñƒ"` *(NEW v1.4.2)*
- Status badges: `accessibilityLabel` Ğ²ĞºĞ»ÑÑ‡Ğ°ĞµÑ‚ human-readable status (e.g. Â«Ğ“Ğ¾Ñ‚Ğ¾Ğ² Ğº Ğ²Ñ‹Ğ´Ğ°Ñ‡ĞµÂ») *(NEW v1.4.2)*
- **SBPPaymentSheet** *(NEW v1.4.3)*:
  - QR image: `accessibilityLabel="QR-ĞºĞ¾Ğ´ Ğ´Ğ»Ñ Ğ¾Ğ¿Ğ»Ğ°Ñ‚Ñ‹ Ñ‡ĞµÑ€ĞµĞ· Ğ¡Ğ‘ĞŸ. Ğ¡ÑƒĞ¼Ğ¼Ğ°: {amount} Ñ€ÑƒĞ±Ğ»ĞµĞ¹"`
  - ĞšĞ½Ğ¾Ğ¿ĞºĞ° Â«ĞÑ‚ĞºÑ€Ñ‹Ñ‚ÑŒ Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğµ Ğ±Ğ°Ğ½ĞºĞ°Â»: primary focus, `accessibilityHint="ĞÑ‚ĞºÑ€Ğ¾ĞµÑ‚ Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğµ Ğ±Ğ°Ğ½ĞºĞ° Ğ´Ğ»Ñ Ğ¾Ğ¿Ğ»Ğ°Ñ‚Ñ‹"`
  - Ğ¢Ğ°Ğ¹Ğ¼ĞµÑ€: `accessibilityLiveRegion`, announced every minute
  - Bottom sheet: `accessibilityRole="dialog"`
- **Localized amounts in a11y labels** *(NEW v1.4.4)*: Ğ’ÑĞµ `accessibilityLabel` ÑĞ¾ ÑÑ‚Ğ¾Ğ¸Ğ¼Ğ¾ÑÑ‚ÑŒÑ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒÑÑ‚ Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ‚ `{amount} Ñ€ÑƒĞ±Ğ»ĞµĞ¹` / `{amount} ĞºĞ¾Ğ¿ĞµĞµĞº` Ñ Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ»ÑŒĞ½Ñ‹Ğ¼ ÑĞºĞ»Ğ¾Ğ½ĞµĞ½Ğ¸ĞµĞ¼ (Spec v1.4.4, sec 14.3). ĞŸÑ€Ğ¸Ğ¼ĞµÑ€: `Â«Ğ˜Ñ‚Ğ¾Ğ³Ğ¾: Ñ‡ĞµÑ‚Ñ‹Ñ€ĞµÑÑ‚Ğ° ÑˆĞµÑÑ‚ÑŒĞ´ĞµÑÑÑ‚ ÑĞµĞ¼ÑŒ Ñ€ÑƒĞ±Ğ»ĞµĞ¹ Ñ‡ĞµÑ‚Ñ‹Ñ€Ğµ ĞºĞ¾Ğ¿ĞµĞ¹ĞºĞ¸Â»` Ğ´Ğ»Ñ screen reader.

---

## 7. Transition Animations (UPDATED v1.4.3)

| Transition | Type | Duration |
|------------|------|----------|
| Tab switch | Fade | 150ms |
| Push (â†’ detail) | Slide from right | 300ms (iOS native) |
| Modal (bottom sheet) | Slide from bottom | 250ms |
| â˜… Toggle | Scale bounce | 200ms |
| Cart badge update | Scale pulse | 150ms |
| Chat message appear | Fade + slide up | 200ms |
| Progress bar (order status) | Animated fill | 500ms (ease-out) |
| Rating stars (select) | Scale bounce | 150ms |
| Â«Ğ¯ Ğ½Ğ° Ğ¼ĞµÑÑ‚ĞµÂ» â†’ status change | Fade out button + confetti | 300ms *(NEW v1.4.2)* |
| Status badge color change | Cross-fade | 200ms *(NEW v1.4.2)* |
| SBPPaymentSheet appear | Slide from bottom (spring) | 300ms *(NEW v1.4.3)* |
| SBPPaymentSheet dismiss (success) | Fade out + scale down | 250ms *(NEW v1.4.3)* |
| SBP QR â†’ bank app transition | System default | â€” *(NEW v1.4.3)* |

---

## 8. Error Screens & Empty States (UPDATED v1.4.3)

| Screen | Empty State | Error State |
|--------|-------------|-------------|
| HomeScreen | Â«ĞĞµÑ‚ Ğ¼Ğ°Ğ³Ğ°Ğ·Ğ¸Ğ½Ğ¾Ğ² Ğ² ÑÑ‚Ğ¾Ğ¼ Ñ€Ğ°Ğ¹Ğ¾Ğ½Ğµ. Ğ˜Ğ·Ğ¼ĞµĞ½Ğ¸Ñ‚Ğµ Ğ°Ğ´Ñ€ĞµÑ Ğ¸Ğ»Ğ¸ Ñ€Ğ°Ğ´Ğ¸ÑƒÑÂ» | API error â†’ retry banner |
| SearchResultsScreen | Â«ĞĞ¸Ñ‡ĞµĞ³Ğ¾ Ğ½Ğµ Ğ½Ğ°Ğ¹Ğ´ĞµĞ½Ğ¾. ĞŸĞ¾Ğ¿Ñ€Ğ¾Ğ±ÑƒĞ¹Ñ‚Ğµ Ğ´Ñ€ÑƒĞ³Ğ¾Ğ¹ Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑÂ» | â€” |
| CartScreen | Â«ĞšĞ¾Ñ€Ğ·Ğ¸Ğ½Ğ° Ğ¿ÑƒÑÑ‚Ğ°. ĞĞ°Ñ‡Ğ½Ğ¸Ñ‚Ğµ Ğ¿Ğ¾ĞºÑƒĞ¿ĞºĞ¸!Â» + CTA button | ITEM_UNAVAILABLE / PRICE_CHANGED warnings |
| FavoritesScreen | Â«Ğ”Ğ¾Ğ±Ğ°Ğ²ÑŒÑ‚Ğµ Ñ‚Ğ¾Ğ²Ğ°Ñ€Ñ‹ Ğ¸Ğ»Ğ¸ Ğ¼Ğ°Ğ³Ğ°Ğ·Ğ¸Ğ½Ñ‹ Ğ² Ğ¸Ğ·Ğ±Ñ€Ğ°Ğ½Ğ½Ğ¾Ğµ â˜…Â» | â€” |
| OrderHistoryScreen | Â«ĞŸĞ¾ĞºĞ° Ğ½ĞµÑ‚ Ğ·Ğ°ĞºĞ°Ğ·Ğ¾Ğ²Â» | â€” |
| SmartAlertsScreen | Â«ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹Ñ‚Ğµ Ğ¾Ğ¿Ğ¾Ğ²ĞµÑ‰ĞµĞ½Ğ¸Ñ Ğ¾ ÑĞºĞ¸Ğ´ĞºĞ°Ñ… ğŸ””Â» | MAX_ALERTS â†’ Â«Ğ£Ğ´Ğ°Ğ»Ğ¸Ñ‚Ğµ Ğ¾Ğ´Ğ¸Ğ½ Ğ¸Ğ· Ğ°Ğ»ĞµÑ€Ñ‚Ğ¾Ğ²Â» |
| AddressScreen | Â«Ğ”Ğ¾Ğ±Ğ°Ğ²ÑŒÑ‚Ğµ Ğ°Ğ´Ñ€ĞµÑ Ğ´Ğ»Ñ ÑƒĞ´Ğ¾Ğ±Ğ½Ğ¾Ğ³Ğ¾ Ğ¿Ğ¾Ğ¸ÑĞºĞ° Ğ¼Ğ°Ğ³Ğ°Ğ·Ğ¸Ğ½Ğ¾Ğ²Â» | MAX_ADDRESSES â†’ Â«Ğ£Ğ´Ğ°Ğ»Ğ¸Ñ‚Ğµ Ğ¾Ğ´Ğ¸Ğ½ Ğ¸Ğ· Ğ°Ğ´Ñ€ĞµÑĞ¾Ğ²Â» |
| Chat (pending) | Â«Ğ§Ğ°Ñ‚ ÑÑ‚Ğ°Ğ½ĞµÑ‚ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿ĞµĞ½ Ğ¿Ğ¾ÑĞ»Ğµ Ğ¿Ğ¾Ğ´Ñ‚Ğ²ĞµÑ€Ğ¶Ğ´ĞµĞ½Ğ¸Ñ Ğ·Ğ°ĞºĞ°Ğ·Ğ°Â» | â€” |
| Chat (ready/customer_arrived) | *(Ğ¿Ğ¾Ğ»Ğ½Ñ‹Ğ¹ Ñ‡Ğ°Ñ‚, Ğ½Ğµ empty state)* | *(NEW v1.4.2)* |
| Chat (completed) | Read-only banner: Â«Ğ—Ğ°ĞºĞ°Ğ· Ğ·Ğ°Ğ²ĞµÑ€ÑˆÑ‘Ğ½. Ğ§Ğ°Ñ‚ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿ĞµĞ½ Ğ´Ğ»Ñ Ğ¿Ñ€Ğ¾ÑĞ¼Ğ¾Ñ‚Ñ€Ğ°Â» | â€” |
| SBPPaymentSheet | â€” | Ğ¢Ğ°Ğ¹Ğ¼ĞµÑ€ Ğ¸ÑÑ‚Ñ‘Ğº â†’ Â«Ğ’Ñ€ĞµĞ¼Ñ Ğ¾Ğ¿Ğ»Ğ°Ñ‚Ñ‹ Ğ¸ÑÑ‚ĞµĞºĞ»Ğ¾. ĞŸĞ¾Ğ¿Ñ€Ğ¾Ğ±ÑƒĞ¹Ñ‚Ğµ ÑĞ½Ğ¾Ğ²Ğ°Â» *(NEW v1.4.3)* |

---

## 9. Push Notification â†’ Screen Routing (UPDATED v1.4.2)

| Push Type | Tap Action | Target Screen |
|-----------|------------|---------------|
| `order.status_changed` | Open order | OrderTrackingScreen (Status tab) |
| `order.ready` *(NEW v1.4.2)* | Open order | OrderTrackingScreen (Status tab) â€” Â«Ğ¯ Ğ½Ğ° Ğ¼ĞµÑÑ‚ĞµÂ» CTA visible |
| `customer_arrived` *(NEW v1.4.2)* | Open order | PickerOrderDetailScreen â€” green highlight |
| `order.completed` *(NEW v1.4.2)* | Open order | OrderTrackingScreen â†’ Rating bottom sheet |
| `order.cancelled` (BNPL) | Open order | OrderTrackingScreen (Status tab) |
| `order.totals_updated` | Open order | OrderTrackingScreen (Ğ¡Ğ¾ÑÑ‚Ğ°Ğ² tab) |
| `chat.message` | Open chat | OrderTrackingScreen (Chat tab) |
| `smart_alert.fired` | Open product | ProductDetailScreen |
| `hold_expired` | Open orders | OrderHistoryScreen |
| `deletion_reminder` | Open profile | ProfileScreen |
| `picker.new_order` | Open order | PickerOrderDetailScreen |
| `picker.customer_arrived` | Open order | PickerOrderDetailScreen (green ğŸŸ¢) |
| `picker.chat_message` | Open chat | PickerOrderDetailScreen (Chat tab) |

---

## 10. Ğ’ĞµÑ€ÑĞ¸Ğ¾Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ¾Ğ² (UPDATED v1.4.5)

| Document | Version | Min Compatible |
|----------|---------|----------------|
| Navigation | **v1.4.5** | v1.4.4 |
| Spec | **v1.4.4** | v1.4.3 |
| API Contract | **v1.4.4** | v1.4.3 |
| Data Model | **v1.4.10** | v1.4.9 |
| Integration Contracts | **v1.6.4** | v1.6.3 |
| BNPL Integration | **v1.2.2** | v1.2.2 |
| Settlement | **v1.2.2** | v1.2.1 |

---

Navigation v1.4.5 (Consolidated) â€” 16.02.2026 â€” Robin Food Product Team
